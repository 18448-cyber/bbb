<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brain Booster - ‡πÅ‡∏≠‡∏õ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏™‡∏°‡∏≠‡∏á</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, doc, setDoc, getDoc, onSnapshot } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged, updateProfile, sendPasswordResetEmail } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';

        const firebaseConfig = {
            apiKey: "AIzaSyAEo6BWxpgcBR9AydTLGWd0zIb6oL9qH28",
            authDomain: "brain-booster-312a3.firebaseapp.com",
            projectId: "brain-booster-312a3",
            storageBucket: "brain-booster-312a3.firebasestorage.app",
            messagingSenderId: "968557988645",
            appId: "1:968557988645:web:00c18c0bdd981bc7afa8cc",
            measurementId: "G-KG15GZL4BE"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        // Make Firebase available globally
        window.firebaseDB = db;
        window.firebaseAuth = auth;
        window.firebaseUtils = { 
            doc, setDoc, getDoc, onSnapshot, 
            createUserWithEmailAndPassword, signInWithEmailAndPassword, 
            signOut, onAuthStateChanged, updateProfile, sendPasswordResetEmail 
        };
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;500;600;700;800;900&display=swap');
        body { 
            font-family: 'Nunito', sans-serif; 
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 25%, #f0f9ff 50%, #fefce8 75%, #fef7f0 100%);
        }
        
        .pet-float {
            animation: petFloat 4s ease-in-out infinite;
        }
        
        @keyframes petFloat {
            0%, 100% { transform: translateY(0px) rotate(-2deg); }
            50% { transform: translateY(-15px) rotate(2deg); }
        }
        
        .breathing-circle {
            animation: breathe 3s ease-in-out infinite;
        }
        
        @keyframes breathe {
            0%, 100% { transform: scale(1); opacity: 0.7; }
            50% { transform: scale(1.2); opacity: 1; }
        }
        
        .wave-animation {
            animation: wave 6s ease-in-out infinite;
        }
        
        @keyframes wave {
            0%, 100% { transform: translateX(0px); }
            50% { transform: translateX(10px); }
        }
        
        .card-hover {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .card-hover:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
        }
        
        .icon-bounce:hover {
            animation: iconBounce 0.6s ease-in-out;
        }
        
        @keyframes iconBounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        
        .streak-glow {
            box-shadow: 0 0 30px rgba(255, 193, 7, 0.6);
            animation: streakPulse 2s ease-in-out infinite;
        }
        
        @keyframes streakPulse {
            0%, 100% { box-shadow: 0 0 30px rgba(255, 193, 7, 0.6); }
            50% { box-shadow: 0 0 40px rgba(255, 193, 7, 0.8); }
        }
        
        .progress-fill {
            transition: width 1s ease-out;
        }
        
        .nature-bg {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            position: relative;
            overflow: hidden;
        }
        
        .nature-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="rgba(255,255,255,0.3)"/><circle cx="80" cy="30" r="1.5" fill="rgba(255,255,255,0.2)"/><circle cx="60" cy="70" r="1" fill="rgba(255,255,255,0.4)"/></svg>');
            animation: sparkle 8s linear infinite;
        }
        
        @keyframes sparkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.8; }
        }
        
        .menu-icon {
            transition: all 0.3s ease;
        }
        
        .menu-icon:hover {
            transform: scale(1.1) rotate(5deg);
        }
        
        .pet-home {
            background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);
            border-radius: 50px;
            position: relative;
            overflow: hidden;
        }
        
        .pet-home::before {
            content: 'üå∏üåøü¶ã';
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 12px;
            opacity: 0.6;
        }
        
        .auth-modal {
            backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.95);
        }
        
        .auth-input {
            transition: all 0.3s ease;
        }
        
        .auth-input:focus {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .auth-button {
            transition: all 0.3s ease;
        }
        
        .auth-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        .floating-shapes {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
        }
        
        .floating-shapes::before,
        .floating-shapes::after {
            content: '';
            position: absolute;
            border-radius: 50%;
            background: linear-gradient(45deg, rgba(168, 85, 247, 0.1), rgba(236, 72, 153, 0.1));
            animation: float 6s ease-in-out infinite;
        }
        
        .floating-shapes::before {
            width: 200px;
            height: 200px;
            top: 10%;
            left: 10%;
            animation-delay: 0s;
        }
        
        .floating-shapes::after {
            width: 150px;
            height: 150px;
            bottom: 10%;
            right: 10%;
            animation-delay: 3s;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Header with Streak Display -->
    <header class="bg-white/70 backdrop-blur-xl shadow-lg rounded-b-[20px] p-3 mb-4">
        <div class="max-w-4xl mx-auto flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <div class="w-10 h-10 bg-gradient-to-br from-purple-200 via-pink-200 to-orange-200 rounded-2xl flex items-center justify-center shadow-lg">
                    <span class="text-xl">üß†</span>
                </div>
                <div>
                    <h1 class="text-2xl font-black bg-gradient-to-r from-purple-400 via-pink-400 to-orange-400 bg-clip-text text-transparent">Brain Booster</h1>
                    <p class="text-xs text-gray-500 font-medium">‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏™‡∏°‡∏≠‡∏á‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô</p>
                </div>
            </div>
            <div class="flex items-center space-x-2">
                <div class="bg-gradient-to-r from-yellow-100 to-orange-100 px-3 py-2 rounded-full border border-yellow-200">
                    <div class="flex items-center space-x-1">
                        <span class="text-lg">üî•</span>
                        <div class="text-center">
                            <div class="text-lg font-black text-orange-600" id="streakCount">0</div>
                            <div class="text-xs font-bold text-orange-500">STREAK</div>
                        </div>
                    </div>
                </div>
                <div class="bg-gradient-to-r from-green-100 to-emerald-100 px-3 py-2 rounded-full border border-green-200">
                    <div class="flex items-center space-x-1">
                        <span class="text-lg">ü™ô</span>
                        <div class="text-center">
                            <div class="text-lg font-black text-green-600" id="coinCount">0</div>
                            <div class="text-xs font-bold text-green-500">COINS</div>
                        </div>
                    </div>
                </div>
                <div class="bg-gradient-to-r from-blue-100 to-purple-100 px-3 py-2 rounded-full border border-blue-200">
                    <div class="text-center">
                        <div class="text-sm font-bold text-purple-600">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà <span id="dayCount">1</span></div>
                        <div class="text-xs font-medium text-purple-500">‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á</div>
                    </div>
                </div>
                <div id="connectionStatus" class="bg-gradient-to-r from-gray-100 to-gray-200 px-3 py-2 rounded-full border border-gray-200">
                    <div class="text-center">
                        <div class="text-xs font-bold text-gray-600">üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠...</div>
                    </div>
                </div>
                <div id="userProfile" class="hidden bg-gradient-to-r from-indigo-100 to-purple-100 px-3 py-2 rounded-full border border-indigo-200 cursor-pointer" onclick="showUserMenu()">
                    <div class="flex items-center space-x-2">
                        <div class="w-8 h-8 bg-gradient-to-br from-indigo-400 to-purple-400 rounded-full flex items-center justify-center">
                            <span class="text-sm">üë§</span>
                        </div>
                        <div class="text-center">
                            <div class="text-xs font-bold text-indigo-600" id="userDisplayName">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="max-w-md mx-auto px-4">
        <!-- Pet Status Section (Top) -->
        <div class="mb-4">
            <div class="bg-white/80 backdrop-blur-xl rounded-[20px] shadow-lg p-4 card-hover pet-home">
                <div class="text-center">
                    <!-- Pet Character -->
                    <div class="mb-4">
                        <div class="relative inline-block">
                            <div class="w-20 h-20 bg-gradient-to-br from-pink-200 to-purple-200 rounded-full flex items-center justify-center pet-float shadow-xl mx-auto">
                                <span class="text-4xl" id="petEmoji">üê±</span>
                            </div>
                            <div class="absolute -top-1 -right-1 w-5 h-5 bg-gradient-to-br from-red-400 to-pink-400 rounded-full flex items-center justify-center">
                                <span class="text-xs">‚ù§Ô∏è</span>
                            </div>
                        </div>
                        <h2 class="text-xl font-black text-gray-800 mt-2" id="petName">‡∏°‡∏¥‡∏ß‡∏°‡∏¥‡∏ß</h2>
                    </div>
                    
                    <!-- Pet Stats -->
                    <div class="grid grid-cols-2 gap-3 mb-4">
                        <!-- Food -->
                        <div class="bg-white/50 rounded-xl p-3 text-center">
                            <div class="w-8 h-8 bg-gradient-to-br from-orange-300 to-red-300 rounded-full flex items-center justify-center mx-auto mb-2">
                                <span class="text-lg">üçñ</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2 mb-1">
                                <div id="foodBar" class="bg-gradient-to-r from-orange-400 to-red-400 h-2 rounded-full progress-fill" style="width: 80%"></div>
                            </div>
                            <div class="text-xs font-bold text-gray-600" id="foodValue">80/100</div>
                        </div>
                        
                        <!-- Water -->
                        <div class="bg-white/50 rounded-xl p-3 text-center">
                            <div class="w-8 h-8 bg-gradient-to-br from-blue-300 to-cyan-300 rounded-full flex items-center justify-center mx-auto mb-2">
                                <span class="text-lg">üíß</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2 mb-1">
                                <div id="waterBar" class="bg-gradient-to-r from-blue-400 to-cyan-400 h-2 rounded-full progress-fill" style="width: 70%"></div>
                            </div>
                            <div class="text-xs font-bold text-gray-600" id="waterValue">70/100</div>
                        </div>
                        
                        <!-- Happiness -->
                        <div class="bg-white/50 rounded-xl p-3 text-center">
                            <div class="w-8 h-8 bg-gradient-to-br from-yellow-300 to-pink-300 rounded-full flex items-center justify-center mx-auto mb-2">
                                <span class="text-lg">üòä</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2 mb-1">
                                <div id="happinessBar" class="bg-gradient-to-r from-yellow-400 to-pink-400 h-2 rounded-full progress-fill" style="width: 90%"></div>
                            </div>
                            <div class="text-xs font-bold text-gray-600" id="happinessValue">90/100</div>
                        </div>
                        
                        <!-- Health -->
                        <div class="bg-white/50 rounded-xl p-3 text-center">
                            <div class="w-8 h-8 bg-gradient-to-br from-green-300 to-emerald-300 rounded-full flex items-center justify-center mx-auto mb-2">
                                <span class="text-lg">‚ù§Ô∏è</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2 mb-1">
                                <div id="healthBar" class="bg-gradient-to-r from-green-400 to-emerald-400 h-2 rounded-full progress-fill" style="width: 100%"></div>
                            </div>
                            <div class="text-xs font-bold text-gray-600" id="healthValue">100/100</div>
                        </div>
                    </div>
                    
                    <!-- Pet Status Summary -->
                    <div class="bg-gradient-to-br from-pink-100 to-purple-100 px-4 py-2 rounded-2xl shadow-inner">
                        <div class="text-sm font-black text-gray-800">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏ß‡∏°</div>
                        <div class="text-lg font-black text-purple-600" id="petOverallStatus">‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏î‡∏µ</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Menu (Center) - 3 Large Circular Icons -->
        <div class="mb-4">
            <div class="space-y-3">
                <!-- Attention Training -->
                <button onclick="showSection('attention')" class="group w-full">
                    <div class="bg-white/80 backdrop-blur-xl rounded-[20px] shadow-lg p-6 card-hover text-center">
                        <div class="w-20 h-20 bg-gradient-to-br from-purple-200 via-pink-200 to-orange-200 rounded-full mx-auto mb-4 flex items-center justify-center menu-icon shadow-lg">
                            <span class="text-3xl">üéØ</span>
                        </div>
                        <h3 class="text-xl font-black text-gray-800 mb-2">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡πà‡∏ß‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ô‡πÉ‡∏à</h3>
                        <p class="text-sm text-gray-600 font-medium">‡∏ù‡∏∂‡∏Å‡∏™‡∏°‡∏≤‡∏ò‡∏¥‡πÅ‡∏•‡∏∞‡πÄ‡∏Å‡∏°‡∏™‡∏°‡∏≠‡∏á</p>
                    </div>
                </button>
                
                <!-- Reading -->
                <button onclick="showSection('reading')" class="group w-full">
                    <div class="bg-white/80 backdrop-blur-xl rounded-[20px] shadow-lg p-6 card-hover text-center">
                        <div class="w-20 h-20 bg-gradient-to-br from-blue-200 via-cyan-200 to-teal-200 rounded-full mx-auto mb-4 flex items-center justify-center menu-icon shadow-lg">
                            <span class="text-3xl">üìö</span>
                        </div>
                        <h3 class="text-xl font-black text-gray-800 mb-2">‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠</h3>
                        <p class="text-sm text-gray-600 font-medium">‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°</p>
                    </div>
                </button>
                
                <!-- Pet Care -->
                <button onclick="showSection('pet')" class="group w-full">
                    <div class="bg-white/80 backdrop-blur-xl rounded-[20px] shadow-lg p-6 card-hover text-center">
                        <div class="w-20 h-20 bg-gradient-to-br from-green-200 via-emerald-200 to-teal-200 rounded-full mx-auto mb-4 flex items-center justify-center menu-icon shadow-lg">
                            <span class="text-3xl">üê±</span>
                        </div>
                        <h3 class="text-xl font-black text-gray-800 mb-2">‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</h3>
                        <p class="text-sm text-gray-600 font-medium">‡∏î‡∏π‡πÅ‡∏•‡πÅ‡∏•‡∏∞‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á</p>
                    </div>
                </button>
            </div>
        </div>

        <!-- Daily Quest Section -->
        <div class="mb-4">
            <div class="bg-white/80 backdrop-blur-xl rounded-[20px] shadow-lg p-4">
                <div class="text-center mb-4">
                    <div class="w-12 h-12 bg-gradient-to-br from-purple-200 to-pink-200 rounded-xl flex items-center justify-center mx-auto mb-3">
                        <span class="text-2xl">üìã</span>
                    </div>
                    <h3 class="text-lg font-black text-gray-800">Daily Quest</h3>
                    <p class="text-xs text-gray-600 font-medium">‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô</p>
                    <div class="text-sm font-bold text-purple-600 mt-2">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÉ‡∏ô <span id="questResetTime">23:59:59</span></div>
                </div>
                
                <!-- Quest List -->
                <div class="space-y-3" id="questList">
                    <!-- Quests will be populated by JavaScript -->
                </div>
                
                <!-- Quest Progress Summary -->
                <div class="mt-4 p-3 bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl">
                    <div class="flex justify-between items-center">
                        <div class="text-sm font-bold text-gray-700">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</div>
                        <div class="text-sm font-black text-purple-600"><span id="completedQuests">0</span>/<span id="totalQuests">5</span></div>
                    </div>
                    <div class="bg-gray-200 rounded-full h-2 mt-2">
                        <div id="questProgress" class="bg-gradient-to-r from-purple-400 to-pink-400 h-2 rounded-full progress-fill" style="width: 0%"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Streak Progress Bar (Bottom) -->
        <div class="mb-4">
            <div class="bg-white/80 backdrop-blur-xl rounded-[20px] shadow-lg p-4">
                <div class="text-center mb-4">
                    <div class="w-12 h-12 bg-gradient-to-br from-yellow-200 to-orange-200 rounded-xl flex items-center justify-center mx-auto mb-3">
                        <span class="text-2xl">üî•</span>
                    </div>
                    <h3 class="text-lg font-black text-gray-800">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤ Streak</h3>
                    <p class="text-xs text-gray-600 font-medium">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: 30 ‡∏ß‡∏±‡∏ô‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô</p>
                    <div class="text-xl font-black text-orange-600 mt-2" id="streakDisplay">0 ‡∏ß‡∏±‡∏ô</div>
                    <div class="text-xs font-bold text-gray-500">‡∏à‡∏≤‡∏Å 30 ‡∏ß‡∏±‡∏ô</div>
                </div>
                
                <div class="bg-gray-200 rounded-full h-4 mb-3">
                    <div id="streakProgress" class="bg-gradient-to-r from-yellow-300 via-orange-300 to-red-300 h-4 rounded-full progress-fill" style="width: 0%"></div>
                </div>
                
                <div class="flex justify-between text-xs font-bold text-gray-500">
                    <span>‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</span>
                    <span>7 ‡∏ß‡∏±‡∏ô ü•â</span>
                    <span>14 ‡∏ß‡∏±‡∏ô ü•à</span>
                    <span>30 ‡∏ß‡∏±‡∏ô ü•á</span>
                </div>
            </div>
        </div>

        <!-- Authentication Modals -->
        
        <!-- Login Modal -->
        <div id="loginModal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4">
            <div class="fixed inset-0 bg-black/50 backdrop-blur-sm" onclick="closeAuthModals()"></div>
            <div class="relative bg-white/95 backdrop-blur-xl rounded-[40px] shadow-2xl p-8 w-full max-w-md auth-modal">
                <div class="floating-shapes"></div>
                
                <!-- Close Button -->
                <button onclick="closeAuthModals()" class="absolute top-6 right-6 w-10 h-10 bg-gray-100 hover:bg-gray-200 rounded-full flex items-center justify-center transition-all">
                    <span class="text-xl text-gray-600">√ó</span>
                </button>
                
                <div class="text-center mb-8">
                    <div class="w-20 h-20 bg-gradient-to-br from-blue-400 to-purple-400 rounded-3xl mx-auto mb-6 flex items-center justify-center shadow-xl">
                        <span class="text-3xl">üîê</span>
                    </div>
                    <h2 class="text-3xl font-black text-gray-800 mb-2">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h2>
                    <p class="text-gray-600 font-medium">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤!</p>
                </div>
                
                <form id="loginForm" class="space-y-6">
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
                        <input type="email" id="loginEmail" required class="auth-input w-full p-4 bg-white/90 border-2 border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 font-medium">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
                        <input type="password" id="loginPassword" required class="auth-input w-full p-4 bg-white/90 border-2 border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 font-medium">
                    </div>
                    
                    <button type="submit" class="auth-button w-full bg-gradient-to-r from-blue-500 to-purple-500 text-white py-4 rounded-2xl font-black text-lg hover:from-blue-600 hover:to-purple-600 shadow-xl">
                        üöÄ ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
                    </button>
                </form>
                
                <div class="mt-6 text-center space-y-3">
                    <button onclick="showForgotPassword()" class="text-blue-600 hover:text-blue-700 font-bold text-sm">
                        ‡∏•‡∏∑‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô?
                    </button>
                    <div class="text-gray-600 text-sm">
                        ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ? 
                        <button onclick="showRegisterModal()" class="text-purple-600 hover:text-purple-700 font-bold">
                            ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
                        </button>
                    </div>
                </div>
                
                <div id="loginError" class="hidden mt-4 p-3 bg-red-100 border border-red-300 rounded-xl text-red-700 text-sm font-medium text-center"></div>
            </div>
        </div>
        
        <!-- Register Modal -->
        <div id="registerModal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4">
            <div class="fixed inset-0 bg-black/50 backdrop-blur-sm" onclick="closeAuthModals()"></div>
            <div class="relative bg-white/95 backdrop-blur-xl rounded-[40px] shadow-2xl p-8 w-full max-w-md auth-modal">
                <div class="floating-shapes"></div>
                
                <!-- Close Button -->
                <button onclick="closeAuthModals()" class="absolute top-6 right-6 w-10 h-10 bg-gray-100 hover:bg-gray-200 rounded-full flex items-center justify-center transition-all">
                    <span class="text-xl text-gray-600">√ó</span>
                </button>
                
                <div class="text-center mb-8">
                    <div class="w-20 h-20 bg-gradient-to-br from-green-400 to-blue-400 rounded-3xl mx-auto mb-6 flex items-center justify-center shadow-xl">
                        <span class="text-3xl">üéâ</span>
                    </div>
                    <h2 class="text-3xl font-black text-gray-800 mb-2">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h2>
                    <p class="text-gray-600 font-medium">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏™‡∏°‡∏≠‡∏á!</p>
                </div>
                
                <form id="registerForm" class="space-y-6">
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</label>
                        <input type="text" id="registerName" required class="auth-input w-full p-4 bg-white/90 border-2 border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-green-400 font-medium" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡πÅ‡∏≠‡∏õ">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
                        <input type="email" id="registerEmail" required class="auth-input w-full p-4 bg-white/90 border-2 border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-green-400 font-medium" placeholder="your@email.com">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
                        <input type="password" id="registerPassword" required class="auth-input w-full p-4 bg-white/90 border-2 border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-green-400 font-medium" placeholder="‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 6 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£">
                        <div class="text-xs text-gray-500 mt-1">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 6 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£</div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
                        <input type="password" id="registerConfirmPassword" required class="auth-input w-full p-4 bg-white/90 border-2 border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-green-400 font-medium" placeholder="‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á">
                    </div>
                    
                    <button type="submit" class="auth-button w-full bg-gradient-to-r from-green-500 to-blue-500 text-white py-4 rounded-2xl font-black text-lg hover:from-green-600 hover:to-blue-600 shadow-xl">
                        üéØ ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
                    </button>
                </form>
                
                <div class="mt-6 text-center">
                    <div class="text-gray-600 text-sm">
                        ‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß? 
                        <button onclick="showLoginModal()" class="text-blue-600 hover:text-blue-700 font-bold">
                            ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
                        </button>
                    </div>
                </div>
                
                <div id="registerError" class="hidden mt-4 p-3 bg-red-100 border border-red-300 rounded-xl text-red-700 text-sm font-medium text-center"></div>
                <div id="registerSuccess" class="hidden mt-4 p-3 bg-green-100 border border-green-300 rounded-xl text-green-700 text-sm font-medium text-center"></div>
            </div>
        </div>
        
        <!-- Forgot Password Modal -->
        <div id="forgotPasswordModal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4">
            <div class="fixed inset-0 bg-black/50 backdrop-blur-sm" onclick="closeAuthModals()"></div>
            <div class="relative bg-white/95 backdrop-blur-xl rounded-[40px] shadow-2xl p-8 w-full max-w-md auth-modal">
                <div class="floating-shapes"></div>
                
                <!-- Close Button -->
                <button onclick="closeAuthModals()" class="absolute top-6 right-6 w-10 h-10 bg-gray-100 hover:bg-gray-200 rounded-full flex items-center justify-center transition-all">
                    <span class="text-xl text-gray-600">√ó</span>
                </button>
                
                <div class="text-center mb-8">
                    <div class="w-20 h-20 bg-gradient-to-br from-orange-400 to-red-400 rounded-3xl mx-auto mb-6 flex items-center justify-center shadow-xl">
                        <span class="text-3xl">üîë</span>
                    </div>
                    <h2 class="text-3xl font-black text-gray-800 mb-2">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</h2>
                    <p class="text-gray-600 font-medium">‡πÉ‡∏™‡πà‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</p>
                </div>
                
                <form id="forgotPasswordForm" class="space-y-6">
                    <div>
                        <label class="block text-sm font-bold text-gray-700 mb-2">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
                        <input type="email" id="forgotEmail" required class="auth-input w-full p-4 bg-white/90 border-2 border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-orange-400 focus:border-orange-400 font-medium" placeholder="your@email.com">
                    </div>
                    
                    <button type="submit" class="auth-button w-full bg-gradient-to-r from-orange-500 to-red-500 text-white py-4 rounded-2xl font-black text-lg hover:from-orange-600 hover:to-red-600 shadow-xl">
                        üìß ‡∏™‡πà‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï
                    </button>
                </form>
                
                <div class="mt-6 text-center">
                    <button onclick="showLoginModal()" class="text-blue-600 hover:text-blue-700 font-bold text-sm">
                        ‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
                    </button>
                </div>
                
                <div id="forgotError" class="hidden mt-4 p-3 bg-red-100 border border-red-300 rounded-xl text-red-700 text-sm font-medium text-center"></div>
                <div id="forgotSuccess" class="hidden mt-4 p-3 bg-green-100 border border-green-300 rounded-xl text-green-700 text-sm font-medium text-center"></div>
            </div>
        </div>
        
        <!-- User Menu Modal -->
        <div id="userMenuModal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4">
            <div class="fixed inset-0 bg-black/50 backdrop-blur-sm" onclick="closeUserMenu()"></div>
            <div class="relative bg-white/95 backdrop-blur-xl rounded-[40px] shadow-2xl p-8 w-full max-w-md auth-modal">
                <div class="floating-shapes"></div>
                
                <!-- Close Button -->
                <button onclick="closeUserMenu()" class="absolute top-6 right-6 w-10 h-10 bg-gray-100 hover:bg-gray-200 rounded-full flex items-center justify-center transition-all">
                    <span class="text-xl text-gray-600">√ó</span>
                </button>
                
                <div class="text-center mb-8">
                    <div class="w-20 h-20 bg-gradient-to-br from-indigo-400 to-purple-400 rounded-3xl mx-auto mb-6 flex items-center justify-center shadow-xl">
                        <span class="text-3xl">üë§</span>
                    </div>
                    <h2 class="text-3xl font-black text-gray-800 mb-2" id="userMenuName">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</h2>
                    <p class="text-gray-600 font-medium" id="userMenuEmail">user@email.com</p>
                </div>
                
                <div class="space-y-4">
                    <button onclick="showChangePasswordModal()" class="w-full bg-gradient-to-r from-blue-100 to-purple-100 hover:from-blue-200 hover:to-purple-200 p-4 rounded-2xl text-left transition-all">
                        <div class="flex items-center space-x-3">
                            <div class="w-12 h-12 bg-gradient-to-br from-blue-400 to-purple-400 rounded-xl flex items-center justify-center">
                                <span class="text-xl">üîê</span>
                            </div>
                            <div>
                                <div class="font-black text-gray-800">‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</div>
                                <div class="text-sm text-gray-600">‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</div>
                            </div>
                        </div>
                    </button>
                    
                    <button onclick="exportUserData()" class="w-full bg-gradient-to-r from-green-100 to-emerald-100 hover:from-green-200 hover:to-emerald-200 p-4 rounded-2xl text-left transition-all">
                        <div class="flex items-center space-x-3">
                            <div class="w-12 h-12 bg-gradient-to-br from-green-400 to-emerald-400 rounded-xl flex items-center justify-center">
                                <span class="text-xl">üìä</span>
                            </div>
                            <div>
                                <div class="font-black text-gray-800">‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>
                                <div class="text-sm text-gray-600">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</div>
                            </div>
                        </div>
                    </button>
                    
                    <button onclick="confirmLogout()" class="w-full bg-gradient-to-r from-red-100 to-pink-100 hover:from-red-200 hover:to-pink-200 p-4 rounded-2xl text-left transition-all">
                        <div class="flex items-center space-x-3">
                            <div class="w-12 h-12 bg-gradient-to-br from-red-400 to-pink-400 rounded-xl flex items-center justify-center">
                                <span class="text-xl">üö™</span>
                            </div>
                            <div>
                                <div class="font-black text-gray-800">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</div>
                                <div class="text-sm text-gray-600">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</div>
                            </div>
                        </div>
                    </button>
                </div>
            </div>
        </div>

        <!-- Content Sections -->
        
        <!-- Memory Game Page -->
        <div id="memoryGamePage" class="section hidden fixed inset-0 bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 overflow-y-auto p-6">
            <!-- Back Button -->
            <button onclick="exitGame()" class="fixed top-6 left-6 z-50 bg-white/90 backdrop-blur-xl rounded-full p-4 shadow-lg hover:bg-white transition-all transform hover:scale-105">
                <span class="text-2xl">‚Üê</span>
            </button>
            
            <div class="max-w-4xl mx-auto mt-16">
                <div class="bg-white/95 backdrop-blur-xl rounded-[40px] shadow-2xl p-8">
                    <div class="text-center mb-8">
                        <div class="w-20 h-20 bg-gradient-to-br from-blue-400 to-purple-400 rounded-3xl mx-auto mb-6 flex items-center justify-center shadow-xl">
                            <span class="text-3xl">üß©</span>
                        </div>
                        <h2 class="text-4xl font-black text-gray-800 mb-4">‡πÄ‡∏Å‡∏°‡∏ù‡∏∂‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥</h2>
                        <p class="text-gray-600 font-medium text-lg">‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô</p>
                    </div>
                    
                    <!-- Game Stats -->
                    <div class="grid grid-cols-3 gap-6 mb-8">
                        <div class="bg-gradient-to-br from-blue-100 to-purple-100 p-6 rounded-3xl text-center shadow-lg">
                            <div class="text-3xl font-black text-blue-600 mb-2" id="gameScore">0</div>
                            <div class="text-sm font-bold text-gray-700">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>
                        </div>
                        <div class="bg-gradient-to-br from-green-100 to-emerald-100 p-6 rounded-3xl text-center shadow-lg">
                            <div class="text-3xl font-black text-green-600 mb-2" id="moveCounter">0</div>
                            <div class="text-sm font-bold text-gray-700">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á</div>
                        </div>
                        <div class="bg-gradient-to-br from-orange-100 to-red-100 p-6 rounded-3xl text-center shadow-lg">
                            <div class="text-3xl font-black text-orange-600 mb-2" id="gameTimer">0</div>
                            <div class="text-sm font-bold text-gray-700">‡πÄ‡∏ß‡∏•‡∏≤ (‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)</div>
                        </div>
                    </div>
                    
                    <!-- Difficulty Selection -->
                    <div class="text-center mb-8">
                        <h3 class="text-2xl font-black text-gray-800 mb-4">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å</h3>
                        <div class="flex justify-center space-x-4">
                            <button onclick="setMemoryDifficulty(2)" class="bg-gradient-to-r from-green-400 to-emerald-400 text-white px-6 py-3 rounded-2xl font-black hover:from-green-500 hover:to-emerald-500 transition-all transform hover:scale-105 shadow-lg">
                                ‡∏á‡πà‡∏≤‡∏¢ (2x2)
                            </button>
                            <button onclick="setMemoryDifficulty(4)" class="bg-gradient-to-r from-yellow-400 to-orange-400 text-white px-6 py-3 rounded-2xl font-black hover:from-yellow-500 hover:to-orange-500 transition-all transform hover:scale-105 shadow-lg">
                                ‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á (4x4)
                            </button>
                            <button onclick="setMemoryDifficulty(6)" class="bg-gradient-to-r from-red-400 to-pink-400 text-white px-6 py-3 rounded-2xl font-black hover:from-red-500 hover:to-pink-500 transition-all transform hover:scale-105 shadow-lg">
                                ‡∏¢‡∏≤‡∏Å (6x6)
                            </button>
                        </div>
                    </div>
                    
                    <!-- Game Board -->
                    <div id="memoryCards" class="grid grid-cols-4 gap-4 max-w-2xl mx-auto mb-6"></div>
                </div>
            </div>
        </div>
        
        <!-- Reaction Game Page -->
        <div id="reactionGamePage" class="section hidden fixed inset-0 bg-gradient-to-br from-yellow-50 via-orange-50 to-red-50 overflow-y-auto p-6">
            <!-- Back Button -->
            <button onclick="exitGame()" class="fixed top-6 left-6 z-50 bg-white/90 backdrop-blur-xl rounded-full p-4 shadow-lg hover:bg-white transition-all transform hover:scale-105">
                <span class="text-2xl">‚Üê</span>
            </button>
            
            <div class="max-w-4xl mx-auto mt-16">
                <div class="bg-white/95 backdrop-blur-xl rounded-[40px] shadow-2xl p-8">
                    <div class="text-center mb-8">
                        <div class="w-20 h-20 bg-gradient-to-br from-yellow-400 to-orange-400 rounded-3xl mx-auto mb-6 flex items-center justify-center shadow-xl">
                            <span class="text-3xl">‚ö°</span>
                        </div>
                        <h2 class="text-4xl font-black text-gray-800 mb-4">‡πÄ‡∏Å‡∏°‡∏ù‡∏∂‡∏Å‡∏õ‡∏è‡∏¥‡∏Å‡∏¥‡∏£‡∏¥‡∏¢‡∏≤</h2>
                        <p class="text-gray-600 font-medium text-lg">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏á‡∏Å‡∏•‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß</p>
                    </div>
                    
                    <!-- Game Stats -->
                    <div class="grid grid-cols-2 gap-6 mb-8">
                        <div class="bg-gradient-to-br from-blue-100 to-purple-100 p-6 rounded-3xl text-center shadow-lg">
                            <div class="text-3xl font-black text-blue-600 mb-2" id="reactionRound">1</div>
                            <div class="text-sm font-bold text-gray-700">‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà</div>
                        </div>
                        <div class="bg-gradient-to-br from-green-100 to-emerald-100 p-6 rounded-3xl text-center shadow-lg">
                            <div class="text-3xl font-black text-green-600 mb-2" id="avgReactionTime">-</div>
                            <div class="text-sm font-bold text-gray-700">‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ (ms)</div>
                        </div>
                    </div>
                    
                    <!-- Game Message -->
                    <div class="text-center mb-8">
                        <div class="bg-gradient-to-br from-gray-100 to-gray-200 p-6 rounded-3xl shadow-inner">
                            <div class="text-xl font-black text-gray-800" id="reactionMessage">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô</div>
                        </div>
                    </div>
                    
                    <!-- Game Circles -->
                    <div class="grid grid-cols-3 gap-8 max-w-md mx-auto mb-8">
                        <div id="circle1" onclick="clickCircle(1)" class="w-20 h-20 bg-gray-300 rounded-full mx-auto cursor-pointer transition-all transform hover:scale-110 shadow-lg"></div>
                        <div id="circle2" onclick="clickCircle(2)" class="w-20 h-20 bg-gray-300 rounded-full mx-auto cursor-pointer transition-all transform hover:scale-110 shadow-lg"></div>
                        <div id="circle3" onclick="clickCircle(3)" class="w-20 h-20 bg-gray-300 rounded-full mx-auto cursor-pointer transition-all transform hover:scale-110 shadow-lg"></div>
                    </div>
                    
                    <!-- Start Button -->
                    <div class="text-center">
                        <button onclick="startReactionGame()" class="bg-gradient-to-r from-yellow-400 to-orange-400 text-white px-8 py-4 rounded-3xl font-black text-xl hover:from-yellow-500 hover:to-orange-500 transition-all transform hover:scale-105 shadow-xl">
                            ‚ö° ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Word Memory Game Page -->
        <div id="wordGamePage" class="section hidden fixed inset-0 bg-gradient-to-br from-green-50 via-teal-50 to-blue-50 overflow-y-auto p-6">
            <!-- Back Button -->
            <button onclick="exitGame()" class="fixed top-6 left-6 z-50 bg-white/90 backdrop-blur-xl rounded-full p-4 shadow-lg hover:bg-white transition-all transform hover:scale-105">
                <span class="text-2xl">‚Üê</span>
            </button>
            
            <div class="max-w-4xl mx-auto mt-16">
                <div class="bg-white/95 backdrop-blur-xl rounded-[40px] shadow-2xl p-8">
                    <div class="text-center mb-8">
                        <div class="w-20 h-20 bg-gradient-to-br from-green-400 to-teal-400 rounded-3xl mx-auto mb-6 flex items-center justify-center shadow-xl">
                            <span class="text-3xl">üìù</span>
                        </div>
                        <h2 class="text-4xl font-black text-gray-800 mb-4">‡πÄ‡∏Å‡∏°‡∏à‡∏≥‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå</h2>
                        <p class="text-gray-600 font-medium text-lg">‡∏à‡∏≥‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡πÅ‡∏•‡∏∞‡∏´‡∏≤‡∏Ñ‡∏≥‡πÉ‡∏´‡∏°‡πà</p>
                    </div>
                    
                    <!-- Game Stats -->
                    <div class="grid grid-cols-3 gap-6 mb-8">
                        <div class="bg-gradient-to-br from-blue-100 to-purple-100 p-6 rounded-3xl text-center shadow-lg">
                            <div class="text-3xl font-black text-blue-600 mb-2" id="wordLevel">1</div>
                            <div class="text-sm font-bold text-gray-700">‡∏£‡∏∞‡∏î‡∏±‡∏ö</div>
                        </div>
                        <div class="bg-gradient-to-br from-green-100 to-emerald-100 p-6 rounded-3xl text-center shadow-lg">
                            <div class="text-3xl font-black text-green-600 mb-2" id="wordScore">0</div>
                            <div class="text-sm font-bold text-gray-700">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>
                        </div>
                        <div class="bg-gradient-to-br from-orange-100 to-red-100 p-6 rounded-3xl text-center shadow-lg">
                            <div class="text-3xl font-black text-orange-600 mb-2" id="wordCount">5</div>
                            <div class="text-sm font-bold text-gray-700">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥</div>
                        </div>
                    </div>
                    
                    <!-- Memory Phase -->
                    <div id="wordMemoryPhase" class="text-center mb-8">
                        <h3 class="text-2xl font-black text-gray-800 mb-4">‡∏à‡∏≥‡∏Ñ‡∏≥‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ</h3>
                        <div class="bg-gradient-to-br from-blue-100 to-purple-100 p-6 rounded-3xl mb-6 shadow-inner">
                            <div class="text-6xl font-black text-blue-600 mb-2" id="wordTimer">5</div>
                            <div class="text-lg font-bold text-gray-700">‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</div>
                        </div>
                        <div id="originalWords" class="grid grid-cols-2 gap-4 max-w-md mx-auto mb-6"></div>
                        <button onclick="startWordGame()" class="bg-gradient-to-r from-green-400 to-teal-400 text-white px-8 py-4 rounded-3xl font-black text-xl hover:from-green-500 hover:to-teal-500 transition-all transform hover:scale-105 shadow-xl">
                            üìù ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°
                        </button>
                    </div>
                    
                    <!-- Test Phase -->
                    <div id="wordTestPhase" class="text-center hidden">
                        <h3 class="text-2xl font-black text-gray-800 mb-4">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Ñ‡∏≥‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡πÄ‡∏´‡πá‡∏ô</h3>
                        <div id="testWords" class="grid grid-cols-2 gap-4 max-w-md mx-auto mb-6"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Simon Game Page -->
        <div id="simonGamePage" class="section hidden fixed inset-0 bg-gradient-to-br from-purple-50 via-pink-50 to-indigo-50 overflow-y-auto p-6">
            <!-- Back Button -->
            <button onclick="exitGame()" class="fixed top-6 left-6 z-50 bg-white/90 backdrop-blur-xl rounded-full p-4 shadow-lg hover:bg-white transition-all transform hover:scale-105">
                <span class="text-2xl">‚Üê</span>
            </button>
            
            <div class="max-w-4xl mx-auto mt-16">
                <div class="bg-white/95 backdrop-blur-xl rounded-[40px] shadow-2xl p-8">
                    <div class="text-center mb-8">
                        <div class="w-20 h-20 bg-gradient-to-br from-purple-400 to-pink-400 rounded-3xl mx-auto mb-6 flex items-center justify-center shadow-xl">
                            <span class="text-3xl">üéµ</span>
                        </div>
                        <h2 class="text-4xl font-black text-gray-800 mb-4">‡πÄ‡∏Å‡∏° Simon</h2>
                        <p class="text-gray-600 font-medium text-lg">‡∏à‡∏≥‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏™‡∏µ‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡∏ã‡πâ‡∏≥‡∏ï‡∏≤‡∏°</p>
                    </div>
                    
                    <!-- Game Stats -->
                    <div class="grid grid-cols-2 gap-6 mb-8">
                        <div class="bg-gradient-to-br from-blue-100 to-purple-100 p-6 rounded-3xl text-center shadow-lg">
                            <div class="text-3xl font-black text-blue-600 mb-2" id="simonLevel">1</div>
                            <div class="text-sm font-bold text-gray-700">‡∏£‡∏∞‡∏î‡∏±‡∏ö</div>
                        </div>
                        <div class="bg-gradient-to-br from-green-100 to-emerald-100 p-6 rounded-3xl text-center shadow-lg">
                            <div class="text-3xl font-black text-green-600 mb-2" id="simonScore">0</div>
                            <div class="text-sm font-bold text-gray-700">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>
                        </div>
                    </div>
                    
                    <!-- Game Message -->
                    <div class="text-center mb-8">
                        <div class="bg-gradient-to-br from-gray-100 to-gray-200 p-6 rounded-3xl shadow-inner">
                            <div class="text-xl font-black text-gray-800" id="simonMessage">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô</div>
                        </div>
                    </div>
                    
                    <!-- Simon Game Board -->
                    <div class="flex justify-center mb-8">
                        <div class="grid grid-cols-2 gap-4 w-80 h-80">
                            <!-- Red Button (Top Left) -->
                            <button id="simon-red" onclick="simonButtonClick(0)" class="w-36 h-36 bg-red-500 hover:bg-red-600 rounded-tl-full transition-all duration-200 shadow-2xl transform hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed">
                            </button>
                            
                            <!-- Green Button (Top Right) -->
                            <button id="simon-green" onclick="simonButtonClick(1)" class="w-36 h-36 bg-green-500 hover:bg-green-600 rounded-tr-full transition-all duration-200 shadow-2xl transform hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed">
                            </button>
                            
                            <!-- Blue Button (Bottom Left) -->
                            <button id="simon-blue" onclick="simonButtonClick(2)" class="w-36 h-36 bg-blue-500 hover:bg-blue-600 rounded-bl-full transition-all duration-200 shadow-2xl transform hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed">
                            </button>
                            
                            <!-- Yellow Button (Bottom Right) -->
                            <button id="simon-yellow" onclick="simonButtonClick(3)" class="w-36 h-36 bg-yellow-500 hover:bg-yellow-600 rounded-br-full transition-all duration-200 shadow-2xl transform hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed">
                            </button>
                        </div>
                    </div>
                    
                    <!-- Start Button -->
                    <div class="text-center">
                        <button onclick="startSimonGame()" id="simonStartBtn" class="bg-gradient-to-r from-purple-400 to-pink-400 text-white px-8 py-4 rounded-3xl font-black text-xl hover:from-purple-500 hover:to-pink-500 transition-all transform hover:scale-105 shadow-xl">
                            üéµ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Attention Training Section -->
        <div id="attentionSection" class="section hidden fixed inset-0 bg-gradient-to-br from-purple-50 via-pink-50 to-orange-50 overflow-y-auto p-6">
            <div class="grid md:grid-cols-2 gap-4 mb-6 mt-16">
                <!-- Meditation Mode -->
                <div class="bg-white/95 backdrop-blur-xl rounded-[20px] shadow-2xl p-4 card-hover nature-bg">
                    <div class="text-center mb-4">
                        <div class="w-12 h-12 bg-white/80 rounded-2xl mx-auto mb-3 flex items-center justify-center shadow-xl">
                            <span class="text-xl">üßò‚Äç‚ôÄÔ∏è</span>
                        </div>
                        <h3 class="text-xl font-black text-white mb-1">‡∏ô‡∏±‡πà‡∏á‡∏™‡∏°‡∏≤‡∏ò‡∏¥</h3>
                        <p class="text-xs text-white/80 font-medium">‡∏ù‡∏∂‡∏Å‡∏™‡∏°‡∏≤‡∏ò‡∏¥‡∏ó‡πà‡∏≤‡∏°‡∏Å‡∏•‡∏≤‡∏á‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥</p>
                    </div>
                    
                    <div class="text-center">
                        <div class="relative mb-4">
                            <div class="w-32 h-32 bg-gradient-to-br from-green-200/50 via-blue-200/50 to-purple-200/50 rounded-full mx-auto breathing-circle flex items-center justify-center backdrop-blur-sm">
                                <div class="w-20 h-20 bg-white/30 rounded-full flex items-center justify-center">
                                    <span class="text-3xl wave-animation">üçÉ</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <select id="meditationTime" class="w-full p-3 bg-white/95 border-2 border-white/50 rounded-xl text-center font-bold text-sm focus:outline-none focus:ring-2 focus:ring-purple-300 focus:border-purple-300 shadow-lg backdrop-blur-sm" onchange="toggleCustomMeditationTime()">
                                <option value="1">üïê 1 ‡∏ô‡∏≤‡∏ó‡∏µ</option>
                                <option value="3">üïí 3 ‡∏ô‡∏≤‡∏ó‡∏µ</option>
                                <option value="5" selected>üïî 5 ‡∏ô‡∏≤‡∏ó‡∏µ</option>
                                <option value="10">üïô 10 ‡∏ô‡∏≤‡∏ó‡∏µ</option>
                                <option value="15">üïí 15 ‡∏ô‡∏≤‡∏ó‡∏µ</option>
                                <option value="20">üïï 20 ‡∏ô‡∏≤‡∏ó‡∏µ</option>
                                <option value="custom">‚öôÔ∏è ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏≠‡∏á</option>
                            </select>
                        </div>
                        
                        <!-- Custom meditation time input -->
                        <div id="customMeditationTime" class="mb-3 hidden">
                            <div class="flex items-center space-x-2">
                                <input type="number" id="customMeditationMinutes" min="1" max="120" value="5" class="flex-1 p-3 bg-white/95 border-2 border-white/50 rounded-xl text-center font-bold text-sm focus:outline-none focus:ring-2 focus:ring-purple-300 focus:border-purple-300 shadow-lg">
                                <span class="text-white font-bold text-sm">‡∏ô‡∏≤‡∏ó‡∏µ</span>
                            </div>
                            <div class="text-xs text-white/80 text-center mt-1">‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏î‡πâ 1-120 ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                        </div>
                        
                        <button onclick="startMeditation()" id="meditationBtn" class="w-full bg-white/90 text-gray-800 py-2 rounded-xl font-black text-sm hover:bg-white transition-all transform hover:scale-105 shadow-xl">
                            üå∏ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ô‡∏±‡πà‡∏á‡∏™‡∏°‡∏≤‡∏ò‡∏¥
                        </button>
                        <div id="meditationTimer" class="mt-3 text-2xl font-black text-white hidden">00:00</div>
                    </div>
                </div>

                <!-- Brain Games Menu -->
                <div class="bg-white/95 backdrop-blur-xl rounded-[40px] shadow-2xl p-8 card-hover">
                    <div class="text-center mb-8">
                        <div class="w-20 h-20 bg-gradient-to-br from-purple-400 to-pink-400 rounded-3xl mx-auto mb-6 flex items-center justify-center shadow-xl">
                            <span class="text-3xl">üß†</span>
                        </div>
                        <h3 class="text-3xl font-black text-gray-800 mb-2">‡πÄ‡∏Å‡∏°‡∏ù‡∏∂‡∏Å‡∏™‡∏°‡∏≠‡∏á</h3>
                        <p class="text-gray-600 font-medium">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Å‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å</p>
                    </div>
                    
                    <div class="space-y-4">
                        <button onclick="startBrainGame('memory')" class="w-full bg-gradient-to-r from-blue-100 to-purple-100 hover:from-blue-200 hover:to-purple-200 p-6 rounded-3xl transition-all transform hover:scale-105 text-left shadow-lg">
                            <div class="flex items-center space-x-4">
                                <div class="w-16 h-16 bg-gradient-to-br from-blue-400 to-purple-400 rounded-2xl flex items-center justify-center shadow-lg">
                                    <span class="text-2xl">üß©</span>
                                </div>
                                <div>
                                    <h4 class="font-black text-gray-800 text-lg">‡πÄ‡∏Å‡∏°‡∏ù‡∏∂‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥</h4>
                                    <p class="text-sm text-gray-600 font-medium">‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô</p>
                                </div>
                            </div>
                        </button>
                        

                        
                        <button onclick="startBrainGame('reaction')" class="w-full bg-gradient-to-r from-yellow-100 to-orange-100 hover:from-yellow-200 hover:to-orange-200 p-6 rounded-3xl transition-all transform hover:scale-105 text-left shadow-lg">
                            <div class="flex items-center space-x-4">
                                <div class="w-16 h-16 bg-gradient-to-br from-yellow-400 to-orange-400 rounded-2xl flex items-center justify-center shadow-lg">
                                    <span class="text-2xl">‚ö°</span>
                                </div>
                                <div>
                                    <h4 class="font-black text-gray-800 text-lg">‡πÄ‡∏Å‡∏°‡∏ù‡∏∂‡∏Å‡∏õ‡∏è‡∏¥‡∏Å‡∏¥‡∏£‡∏¥‡∏¢‡∏≤</h4>
                                    <p class="text-sm text-gray-600 font-medium">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏á‡∏Å‡∏•‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß</p>
                                </div>
                            </div>
                        </button>
                        
                        <button onclick="startBrainGame('word')" class="w-full bg-gradient-to-r from-green-100 to-teal-100 hover:from-green-200 hover:to-teal-200 p-6 rounded-3xl transition-all transform hover:scale-105 text-left shadow-lg">
                            <div class="flex items-center space-x-4">
                                <div class="w-16 h-16 bg-gradient-to-br from-green-400 to-teal-400 rounded-2xl flex items-center justify-center shadow-lg">
                                    <span class="text-2xl">üìù</span>
                                </div>
                                <div>
                                    <h4 class="font-black text-gray-800 text-lg">‡πÄ‡∏Å‡∏°‡∏à‡∏≥‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå</h4>
                                    <p class="text-sm text-gray-600 font-medium">‡∏à‡∏≥‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡πÅ‡∏•‡∏∞‡∏´‡∏≤‡∏Ñ‡∏≥‡πÉ‡∏´‡∏°‡πà</p>
                                </div>
                            </div>
                        </button>
                        
                        <button onclick="startBrainGame('simon')" class="w-full bg-gradient-to-r from-purple-100 to-pink-100 hover:from-purple-200 hover:to-pink-200 p-6 rounded-3xl transition-all transform hover:scale-105 text-left shadow-lg">
                            <div class="flex items-center space-x-4">
                                <div class="w-16 h-16 bg-gradient-to-br from-purple-400 to-pink-400 rounded-2xl flex items-center justify-center shadow-lg">
                                    <span class="text-2xl">üéµ</span>
                                </div>
                                <div>
                                    <h4 class="font-black text-gray-800 text-lg">‡πÄ‡∏Å‡∏° Simon</h4>
                                    <p class="text-sm text-gray-600 font-medium">‡∏à‡∏≥‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏™‡∏µ‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡∏ã‡πâ‡∏≥‡∏ï‡∏≤‡∏°</p>
                                </div>
                            </div>
                        </button>
                    </div>
                </div>
            </div>
            

        </div>

        <!-- Reading Section -->
        <div id="readingSection" class="section hidden fixed inset-0 bg-gradient-to-br from-blue-50 via-cyan-50 to-teal-50 overflow-y-auto p-6">
            <div class="grid md:grid-cols-3 gap-8 mt-16">
                <!-- Today's Goal -->
                <div class="bg-white/95 backdrop-blur-xl rounded-[40px] shadow-2xl p-8 card-hover">
                    <div class="text-center mb-8">
                        <div class="w-20 h-20 bg-gradient-to-br from-blue-400 to-purple-400 rounded-3xl mx-auto mb-6 flex items-center justify-center shadow-xl">
                            <span class="text-3xl">üìö</span>
                        </div>
                        <h3 class="text-3xl font-black text-gray-800 mb-2">‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠</h3>
                        <p class="text-gray-600 font-medium">‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡∏∞‡∏≠‡πà‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠</p>
                    </div>
                    
                    <div class="text-center">
                        <div class="bg-gradient-to-br from-blue-100 to-purple-100 p-8 rounded-3xl mb-6 shadow-inner">
                            <div class="text-6xl font-black text-blue-600 mb-2" id="readingTimer">00:00</div>
                            <div class="text-lg font-bold text-gray-700">‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠</div>
                        </div>
                        
                        <div class="mb-6">
                            <select id="readingTime" class="w-full p-4 bg-white/90 border-0 rounded-2xl text-center font-bold text-lg focus:outline-none focus:ring-2 focus:ring-blue-400 shadow-lg" onchange="toggleCustomReadingTime()">
                                <option value="5">üìñ 5 ‡∏ô‡∏≤‡∏ó‡∏µ</option>
                                <option value="10">üìö 10 ‡∏ô‡∏≤‡∏ó‡∏µ</option>
                                <option value="15">üìó 15 ‡∏ô‡∏≤‡∏ó‡∏µ</option>
                                <option value="20">üìò 20 ‡∏ô‡∏≤‡∏ó‡∏µ</option>
                                <option value="30">üìô 30 ‡∏ô‡∏≤‡∏ó‡∏µ</option>
                                <option value="45">üìï 45 ‡∏ô‡∏≤‡∏ó‡∏µ</option>
                                <option value="60">üìî 1 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</option>
                                <option value="custom">‚öôÔ∏è ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏≠‡∏á</option>
                            </select>
                        </div>
                        
                        <!-- Custom reading time input -->
                        <div id="customReadingTime" class="mb-6 hidden">
                            <div class="bg-white/90 p-4 rounded-2xl shadow-lg">
                                <div class="flex items-center space-x-3 mb-3">
                                    <div class="flex-1">
                                        <label class="block text-sm font-bold text-gray-700 mb-2">‡∏ô‡∏≤‡∏ó‡∏µ</label>
                                        <input type="number" id="customReadingMinutes" min="1" max="300" value="15" class="w-full p-3 border-2 border-blue-200 rounded-xl text-center font-bold text-lg focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400">
                                    </div>
                                    <div class="text-2xl">üìö</div>
                                </div>
                                <div class="text-xs text-gray-600 text-center">‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏î‡πâ 1-300 ‡∏ô‡∏≤‡∏ó‡∏µ (5 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á)</div>
                            </div>
                        </div>
                        
                        <div class="mb-6">
                            <div class="flex justify-between text-sm font-bold text-gray-600 mb-3">
                                <span>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</span>
                                <span><span id="dailyReadingTime">0</span> ‡∏ô‡∏≤‡∏ó‡∏µ</span>
                            </div>
                            <div class="bg-gray-200 rounded-full h-4">
                                <div id="readingProgress" class="bg-gradient-to-r from-green-400 to-blue-400 h-4 rounded-full progress-fill" style="width: 0%"></div>
                            </div>
                        </div>
                        
                        <button onclick="startReading()" id="readingBtn" class="w-full bg-gradient-to-r from-green-400 to-blue-400 text-white py-6 rounded-3xl font-black text-xl hover:from-green-500 hover:to-blue-500 transition-all transform hover:scale-105 shadow-xl">
                            üìñ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏≠‡πà‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠
                        </button>
                    </div>
                </div>

                <!-- Weekly Progress Graph -->
                <div class="bg-white/95 backdrop-blur-xl rounded-[40px] shadow-2xl p-8 card-hover">
                    <div class="text-center mb-8">
                        <div class="w-20 h-20 bg-gradient-to-br from-green-400 to-teal-400 rounded-3xl mx-auto mb-6 flex items-center justify-center shadow-xl">
                            <span class="text-3xl">üìä</span>
                        </div>
                        <h3 class="text-3xl font-black text-gray-800 mb-2">‡∏Å‡∏£‡∏≤‡∏ü‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤</h3>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="flex items-end justify-between h-32 bg-gradient-to-t from-gray-100 to-transparent rounded-2xl p-4">
                            <div class="flex flex-col items-center">
                                <div class="w-8 bg-gradient-to-t from-blue-400 to-blue-300 rounded-t-lg mb-2" style="height: 60%"></div>
                                <span class="text-xs font-bold text-gray-600">‡∏à</span>
                            </div>
                            <div class="flex flex-col items-center">
                                <div class="w-8 bg-gradient-to-t from-green-400 to-green-300 rounded-t-lg mb-2" style="height: 80%"></div>
                                <span class="text-xs font-bold text-gray-600">‡∏≠</span>
                            </div>
                            <div class="flex flex-col items-center">
                                <div class="w-8 bg-gradient-to-t from-yellow-400 to-yellow-300 rounded-t-lg mb-2" style="height: 40%"></div>
                                <span class="text-xs font-bold text-gray-600">‡∏û</span>
                            </div>
                            <div class="flex flex-col items-center">
                                <div class="w-8 bg-gradient-to-t from-purple-400 to-purple-300 rounded-t-lg mb-2" style="height: 90%"></div>
                                <span class="text-xs font-bold text-gray-600">‡∏û‡∏§</span>
                            </div>
                            <div class="flex flex-col items-center">
                                <div class="w-8 bg-gradient-to-t from-pink-400 to-pink-300 rounded-t-lg mb-2" style="height: 70%"></div>
                                <span class="text-xs font-bold text-gray-600">‡∏®</span>
                            </div>
                            <div class="flex flex-col items-center">
                                <div class="w-8 bg-gradient-to-t from-orange-400 to-orange-300 rounded-t-lg mb-2" style="height: 50%"></div>
                                <span class="text-xs font-bold text-gray-600">‡∏™</span>
                            </div>
                            <div class="flex flex-col items-center">
                                <div class="w-8 bg-gradient-to-t from-red-400 to-red-300 rounded-t-lg mb-2" style="height: 30%"></div>
                                <span class="text-xs font-bold text-gray-600">‡∏≠‡∏≤</span>
                            </div>
                        </div>
                        
                        <div class="text-center">
                            <div class="text-2xl font-black text-gray-800 mb-2">‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ô‡∏µ‡πâ</div>
                            <div class="text-lg font-bold text-green-600">‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ 8.5 ‡∏ô‡∏≤‡∏ó‡∏µ/‡∏ß‡∏±‡∏ô</div>
                        </div>
                    </div>
                </div>

                <!-- Streak Rewards -->
                <div class="bg-white/95 backdrop-blur-xl rounded-[40px] shadow-2xl p-8 card-hover">
                    <div class="text-center mb-8">
                        <div class="w-20 h-20 bg-gradient-to-br from-yellow-400 to-orange-400 rounded-3xl mx-auto mb-6 flex items-center justify-center shadow-xl">
                            <span class="text-3xl">üèÜ</span>
                        </div>
                        <h3 class="text-3xl font-black text-gray-800 mb-2">Streak Rewards</h3>
                    </div>
                    
                    <div class="space-y-6">
                        <div class="text-center p-6 bg-gradient-to-br from-yellow-100 to-orange-100 rounded-3xl shadow-inner">
                            <div class="text-4xl mb-3">‚≠ê</div>
                            <div class="font-black text-gray-800 text-lg">Streak ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</div>
                            <div class="text-3xl font-black text-orange-600" id="currentReadingStreak">0 ‡∏ß‡∏±‡∏ô!</div>
                        </div>
                        
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-4 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-2xl border-2 border-yellow-200">
                                <span class="flex items-center space-x-3">
                                    <span class="text-2xl">ü•â</span>
                                    <span class="font-black text-gray-800">7 ‡∏ß‡∏±‡∏ô</span>
                                </span>
                                <span class="text-sm font-bold text-orange-600">+5 üî•</span>
                            </div>
                            <div class="flex items-center justify-between p-4 bg-gradient-to-r from-gray-50 to-blue-50 rounded-2xl border-2 border-gray-200">
                                <span class="flex items-center space-x-3">
                                    <span class="text-2xl">ü•à</span>
                                    <span class="font-black text-gray-800">14 ‡∏ß‡∏±‡∏ô</span>
                                </span>
                                <span class="text-sm font-bold text-blue-600">+10 üî•</span>
                            </div>
                            <div class="flex items-center justify-between p-4 bg-gradient-to-r from-yellow-50 to-yellow-100 rounded-2xl border-2 border-yellow-300">
                                <span class="flex items-center space-x-3">
                                    <span class="text-2xl">ü•á</span>
                                    <span class="font-black text-gray-800">30 ‡∏ß‡∏±‡∏ô</span>
                                </span>
                                <span class="text-sm font-bold text-yellow-600">+20 üî•</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pet Section -->
        <div id="petSection" class="section hidden fixed inset-0 bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 overflow-y-auto p-6">
            <div class="grid md:grid-cols-2 gap-8 mt-16">
                <!-- Pet Shop -->
                <div class="bg-white/95 backdrop-blur-xl rounded-[40px] shadow-2xl p-8 card-hover">
                    <div class="text-center mb-8">
                        <div class="w-20 h-20 bg-gradient-to-br from-green-400 to-emerald-400 rounded-3xl mx-auto mb-6 flex items-center justify-center shadow-xl">
                            <span class="text-3xl">üõí</span>
                        </div>
                        <h3 class="text-3xl font-black text-gray-800 mb-2">‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</h3>
                        <p class="text-gray-600 font-medium">‡πÉ‡∏ä‡πâ Streak ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏î‡∏π‡πÅ‡∏•‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</p>
                    </div>
                    
                    <!-- Current Coins Display -->
                    <div class="bg-gradient-to-r from-green-100 to-emerald-100 p-6 rounded-3xl mb-8 text-center shadow-inner">
                        <div class="flex items-center justify-center space-x-3 mb-2">
                            <span class="text-3xl">ü™ô</span>
                            <div class="text-3xl font-black text-green-600" id="shopCoinDisplay">0</div>
                        </div>
                        <div class="text-lg font-bold text-gray-700">‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà</div>
                    </div>
                    
                    <!-- Shop Categories -->
                    <div class="space-y-6">
                        <!-- Food Category -->
                        <div class="bg-gradient-to-r from-orange-50 to-red-50 p-6 rounded-3xl border-2 border-orange-200">
                            <div class="flex items-center space-x-3 mb-4">
                                <div class="w-12 h-12 bg-gradient-to-br from-orange-400 to-red-400 rounded-2xl flex items-center justify-center">
                                    <span class="text-2xl">üçñ</span>
                                </div>
                                <h4 class="text-2xl font-black text-gray-800">‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏Ç‡∏ô‡∏°</h4>
                            </div>
                            
                            <div class="grid grid-cols-1 gap-3">
                                <div class="bg-white/80 p-4 rounded-2xl flex justify-between items-center shadow-lg">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">ü•©</span>
                                        <div>
                                            <div class="font-black text-gray-800">‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤</div>
                                            <div class="text-sm text-gray-600 font-medium">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏¥‡πà‡∏° +15</div>
                                        </div>
                                    </div>
                                    <button onclick="buyItem('basic_food')" class="bg-gradient-to-r from-orange-400 to-red-400 text-white px-4 py-2 rounded-xl font-black text-sm hover:from-orange-500 hover:to-red-500 transition-all transform hover:scale-105 shadow-lg">
                                        5 ü™ô
                                    </button>
                                </div>
                                
                                <div class="bg-white/80 p-4 rounded-2xl flex justify-between items-center shadow-lg">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">üçñ</span>
                                        <div>
                                            <div class="font-black text-gray-800">‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏û‡∏¥‡πÄ‡∏®‡∏©</div>
                                            <div class="text-sm text-gray-600 font-medium">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏¥‡πà‡∏° +25</div>
                                        </div>
                                    </div>
                                    <button onclick="buyItem('premium_food')" class="bg-gradient-to-r from-orange-400 to-red-400 text-white px-4 py-2 rounded-xl font-black text-sm hover:from-orange-500 hover:to-red-500 transition-all transform hover:scale-105 shadow-lg">
                                        15 ü™ô
                                    </button>
                                </div>
                                
                                <div class="bg-white/80 p-4 rounded-2xl flex justify-between items-center shadow-lg">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">ü¶¥</span>
                                        <div>
                                            <div class="font-black text-gray-800">‡∏Ç‡∏ô‡∏°‡∏Å‡∏£‡∏∞‡∏î‡∏π‡∏Å</div>
                                            <div class="text-sm text-gray-600 font-medium">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç +20</div>
                                        </div>
                                    </div>
                                    <button onclick="buyItem('bone_treat')" class="bg-gradient-to-r from-orange-400 to-red-400 text-white px-4 py-2 rounded-xl font-black text-sm hover:from-orange-500 hover:to-red-500 transition-all transform hover:scale-105 shadow-lg">
                                        10 ü™ô
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Drinks Category -->
                        <div class="bg-gradient-to-r from-blue-50 to-cyan-50 p-6 rounded-3xl border-2 border-blue-200">
                            <div class="flex items-center space-x-3 mb-4">
                                <div class="w-12 h-12 bg-gradient-to-br from-blue-400 to-cyan-400 rounded-2xl flex items-center justify-center">
                                    <span class="text-2xl">üíß</span>
                                </div>
                                <h4 class="text-2xl font-black text-gray-800">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°</h4>
                            </div>
                            
                            <div class="grid grid-cols-1 gap-3">
                                <div class="bg-white/80 p-4 rounded-2xl flex justify-between items-center shadow-lg">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">üö∞</span>
                                        <div>
                                            <div class="font-black text-gray-800">‡∏ô‡πâ‡∏≥‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤</div>
                                            <div class="text-sm text-gray-600 font-medium">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏î‡∏ä‡∏∑‡πà‡∏ô +15</div>
                                        </div>
                                    </div>
                                    <button onclick="buyItem('basic_water')" class="bg-gradient-to-r from-blue-400 to-cyan-400 text-white px-4 py-2 rounded-xl font-black text-sm hover:from-blue-500 hover:to-cyan-500 transition-all transform hover:scale-105 shadow-lg">
                                        5 ü™ô
                                    </button>
                                </div>
                                
                                <div class="bg-white/80 p-4 rounded-2xl flex justify-between items-center shadow-lg">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">üíß</span>
                                        <div>
                                            <div class="font-black text-gray-800">‡∏ô‡πâ‡∏≥‡∏û‡∏∏‡∏ß‡∏¥‡πÄ‡∏®‡∏©</div>
                                            <div class="text-sm text-gray-600 font-medium">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏î‡∏ä‡∏∑‡πà‡∏ô +25</div>
                                        </div>
                                    </div>
                                    <button onclick="buyItem('magic_water')" class="bg-gradient-to-r from-blue-400 to-cyan-400 text-white px-4 py-2 rounded-xl font-black text-sm hover:from-blue-500 hover:to-cyan-500 transition-all transform hover:scale-105 shadow-lg">
                                        10 ü™ô
                                    </button>
                                </div>
                                
                                <div class="bg-white/80 p-4 rounded-2xl flex justify-between items-center shadow-lg">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">ü•§</span>
                                        <div>
                                            <div class="font-black text-gray-800">‡∏ô‡πâ‡∏≥‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏û‡∏¥‡πÄ‡∏®‡∏©</div>
                                            <div class="text-sm text-gray-600 font-medium">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û +10, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç +15</div>
                                        </div>
                                    </div>
                                    <button onclick="buyItem('fruit_juice')" class="bg-gradient-to-r from-blue-400 to-cyan-400 text-white px-4 py-2 rounded-xl font-black text-sm hover:from-blue-500 hover:to-cyan-500 transition-all transform hover:scale-105 shadow-lg">
                                        20 ü™ô
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Toys Category -->
                        <div class="bg-gradient-to-r from-yellow-50 to-pink-50 p-6 rounded-3xl border-2 border-yellow-200">
                            <div class="flex items-center space-x-3 mb-4">
                                <div class="w-12 h-12 bg-gradient-to-br from-yellow-400 to-pink-400 rounded-2xl flex items-center justify-center">
                                    <span class="text-2xl">üéæ</span>
                                </div>
                                <h4 class="text-2xl font-black text-gray-800">‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô</h4>
                            </div>
                            
                            <div class="grid grid-cols-1 gap-3">
                                <div class="bg-white/80 p-4 rounded-2xl flex justify-between items-center shadow-lg">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">‚öΩ</span>
                                        <div>
                                            <div class="font-black text-gray-800">‡∏•‡∏π‡∏Å‡∏ö‡∏≠‡∏•‡πÄ‡∏•‡πá‡∏Å</div>
                                            <div class="text-sm text-gray-600 font-medium">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç +15</div>
                                        </div>
                                    </div>
                                    <button onclick="buyItem('small_ball')" class="bg-gradient-to-r from-yellow-400 to-pink-400 text-white px-4 py-2 rounded-xl font-black text-sm hover:from-yellow-500 hover:to-pink-500 transition-all transform hover:scale-105 shadow-lg">
                                        10 ü™ô
                                    </button>
                                </div>
                                
                                <div class="bg-white/80 p-4 rounded-2xl flex justify-between items-center shadow-lg">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">üéæ</span>
                                        <div>
                                            <div class="font-black text-gray-800">‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏™‡∏∏‡∏î‡∏û‡∏¥‡πÄ‡∏®‡∏©</div>
                                            <div class="text-sm text-gray-600 font-medium">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç +40</div>
                                        </div>
                                    </div>
                                    <button onclick="buyItem('super_toy')" class="bg-gradient-to-r from-yellow-400 to-pink-400 text-white px-4 py-2 rounded-xl font-black text-sm hover:from-yellow-500 hover:to-pink-500 transition-all transform hover:scale-105 shadow-lg">
                                        35 ü™ô
                                    </button>
                                </div>
                                
                                <div class="bg-white/80 p-4 rounded-2xl flex justify-between items-center shadow-lg">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">ü™Ä</span>
                                        <div>
                                            <div class="font-black text-gray-800">‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞</div>
                                            <div class="text-sm text-gray-600 font-medium">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç +25, ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û +5</div>
                                        </div>
                                    </div>
                                    <button onclick="buyItem('smart_toy')" class="bg-gradient-to-r from-yellow-400 to-pink-400 text-white px-4 py-2 rounded-xl font-black text-sm hover:from-yellow-500 hover:to-pink-500 transition-all transform hover:scale-105 shadow-lg">
                                        25 ü™ô
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Home & Decoration Category -->
                        <div class="bg-gradient-to-r from-purple-50 to-indigo-50 p-6 rounded-3xl border-2 border-purple-200">
                            <div class="flex items-center space-x-3 mb-4">
                                <div class="w-12 h-12 bg-gradient-to-br from-purple-400 to-indigo-400 rounded-2xl flex items-center justify-center">
                                    <span class="text-2xl">üè†</span>
                                </div>
                                <h4 class="text-2xl font-black text-gray-800">‡∏ö‡πâ‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏Ç‡∏≠‡∏á‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á</h4>
                            </div>
                            
                            <div class="grid grid-cols-1 gap-3">
                                <div class="bg-white/80 p-4 rounded-2xl flex justify-between items-center shadow-lg">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">üõèÔ∏è</span>
                                        <div>
                                            <div class="font-black text-gray-800">‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡∏ô‡∏∏‡πà‡∏°‡∏ô‡∏¥‡πà‡∏°</div>
                                            <div class="text-sm text-gray-600 font-medium">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç +20, ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û +10</div>
                                        </div>
                                    </div>
                                    <button onclick="buyItem('soft_bed')" class="bg-gradient-to-r from-purple-400 to-indigo-400 text-white px-4 py-2 rounded-xl font-black text-sm hover:from-purple-500 hover:to-indigo-500 transition-all transform hover:scale-105 shadow-lg">
                                        30 ü™ô
                                    </button>
                                </div>
                                
                                <div class="bg-white/80 p-4 rounded-2xl flex justify-between items-center shadow-lg">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">üè∞</span>
                                        <div>
                                            <div class="font-black text-gray-800">‡∏õ‡∏£‡∏≤‡∏™‡∏≤‡∏ó‡∏´‡∏£‡∏π</div>
                                            <div class="text-sm text-gray-600 font-medium">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç +60</div>
                                        </div>
                                    </div>
                                    <button onclick="buyItem('castle')" class="bg-gradient-to-r from-purple-400 to-indigo-400 text-white px-4 py-2 rounded-xl font-black text-sm hover:from-purple-500 hover:to-indigo-500 transition-all transform hover:scale-105 shadow-lg">
                                        75 ü™ô
                                    </button>
                                </div>
                                
                                <div class="bg-white/80 p-4 rounded-2xl flex justify-between items-center shadow-lg">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">üå∏</span>
                                        <div>
                                            <div class="font-black text-gray-800">‡∏™‡∏ß‡∏ô‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ</div>
                                            <div class="text-sm text-gray-600 font-medium">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç +35, ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û +15</div>
                                        </div>
                                    </div>
                                    <button onclick="buyItem('flower_garden')" class="bg-gradient-to-r from-purple-400 to-indigo-400 text-white px-4 py-2 rounded-xl font-black text-sm hover:from-purple-500 hover:to-indigo-500 transition-all transform hover:scale-105 shadow-lg">
                                        40 ü™ô
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fashion & Accessories Category -->
                        <div class="bg-gradient-to-r from-pink-50 to-rose-50 p-6 rounded-3xl border-2 border-pink-200">
                            <div class="flex items-center space-x-3 mb-4">
                                <div class="w-12 h-12 bg-gradient-to-br from-pink-400 to-rose-400 rounded-2xl flex items-center justify-center">
                                    <span class="text-2xl">üëó</span>
                                </div>
                                <h4 class="text-2xl font-black text-gray-800">‡πÅ‡∏ü‡∏ä‡∏±‡πà‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏î‡∏±‡∏ö</h4>
                            </div>
                            
                            <div class="grid grid-cols-1 gap-3">
                                <div class="bg-white/80 p-4 rounded-2xl flex justify-between items-center shadow-lg">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">üéÄ</span>
                                        <div>
                                            <div class="font-black text-gray-800">‡πÇ‡∏ö‡∏ß‡πå‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å</div>
                                            <div class="text-sm text-gray-600 font-medium">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç +15</div>
                                        </div>
                                    </div>
                                    <button onclick="buyItem('cute_bow')" class="bg-gradient-to-r from-pink-400 to-rose-400 text-white px-4 py-2 rounded-xl font-black text-sm hover:from-pink-500 hover:to-rose-500 transition-all transform hover:scale-105 shadow-lg">
                                        15 ü™ô
                                    </button>
                                </div>
                                
                                <div class="bg-white/80 p-4 rounded-2xl flex justify-between items-center shadow-lg">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">üëó</span>
                                        <div>
                                            <div class="font-black text-gray-800">‡∏ä‡∏∏‡∏î‡πÅ‡∏ü‡∏ä‡∏±‡πà‡∏ô</div>
                                            <div class="text-sm text-gray-600 font-medium">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç +30</div>
                                        </div>
                                    </div>
                                    <button onclick="buyItem('fashion')" class="bg-gradient-to-r from-pink-400 to-rose-400 text-white px-4 py-2 rounded-xl font-black text-sm hover:from-pink-500 hover:to-rose-500 transition-all transform hover:scale-105 shadow-lg">
                                        50 ü™ô
                                    </button>
                                </div>
                                
                                <div class="bg-white/80 p-4 rounded-2xl flex justify-between items-center shadow-lg">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">üëë</span>
                                        <div>
                                            <div class="font-black text-gray-800">‡∏°‡∏á‡∏Å‡∏∏‡∏é‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ç‡∏¥‡∏á</div>
                                            <div class="text-sm text-gray-600 font-medium">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç +50</div>
                                        </div>
                                    </div>
                                    <button onclick="buyItem('princess_crown')" class="bg-gradient-to-r from-pink-400 to-rose-400 text-white px-4 py-2 rounded-xl font-black text-sm hover:from-pink-500 hover:to-rose-500 transition-all transform hover:scale-105 shadow-lg">
                                        60 ü™ô
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Pet Display Area -->
                <div class="bg-white/95 backdrop-blur-xl rounded-[40px] shadow-2xl p-8 card-hover">
                    <div class="text-center mb-8">
                        <div class="w-20 h-20 bg-gradient-to-br from-pink-400 to-purple-400 rounded-3xl mx-auto mb-6 flex items-center justify-center shadow-xl">
                            <span class="text-3xl">üê±</span>
                        </div>
                        <h3 class="text-3xl font-black text-gray-800 mb-2">‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h3>
                        <p class="text-gray-600 font-medium">‡∏î‡∏π‡πÅ‡∏•‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡πà‡∏ô‡∏Å‡∏±‡∏ö‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÅ‡∏™‡∏ô‡∏£‡∏±‡∏Å</p>
                    </div>
                    
                    <!-- Pet Display Area -->
                    <div class="bg-gradient-to-br from-pink-100 via-purple-100 to-blue-100 rounded-3xl p-8 mb-8 relative overflow-hidden pet-home">
                        <div class="text-center">
                            <div class="w-48 h-48 bg-white/50 rounded-full flex items-center justify-center mx-auto mb-6 pet-float shadow-xl">
                                <span class="text-9xl" id="petEmojiLarge">üê±</span>
                            </div>
                            <div class="text-4xl font-black text-gray-800 mb-3" id="petNameLarge">‡∏°‡∏¥‡∏ß‡∏°‡∏¥‡∏ß</div>
                            <div class="text-lg text-gray-600 font-medium mb-6">‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÅ‡∏™‡∏ô‡∏£‡∏±‡∏Å</div>
                            
                            <!-- Pet Mood Display -->
                            <div class="bg-white/80 backdrop-blur-sm rounded-3xl p-6 mb-6 shadow-lg">
                                <div class="text-2xl font-black text-gray-800 mb-3">‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</div>
                                <div class="text-4xl mb-3" id="petMoodEmoji">üò∏</div>
                                <div class="text-xl font-bold text-gray-700" id="petMoodText">‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏°‡∏≤‡∏Å!</div>
                            </div>
                            
                            <!-- Pet Stats Display -->
                            <div class="grid grid-cols-2 gap-4">
                                <!-- Food -->
                                <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-4 shadow-lg">
                                    <div class="flex items-center justify-center mb-3">
                                        <div class="w-12 h-12 bg-gradient-to-br from-orange-400 to-red-400 rounded-full flex items-center justify-center">
                                            <span class="text-2xl">üçñ</span>
                                        </div>
                                    </div>
                                    <div class="text-lg font-black text-gray-800 mb-2">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏¥‡πà‡∏°</div>
                                    <div class="w-full bg-gray-200 rounded-full h-3 mb-2">
                                        <div id="foodBarLarge" class="bg-gradient-to-r from-orange-400 to-red-400 h-3 rounded-full progress-fill" style="width: 80%"></div>
                                    </div>
                                    <div class="text-lg font-bold text-gray-600" id="foodValueLarge">80/100</div>
                                </div>
                                
                                <!-- Water -->
                                <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-4 shadow-lg">
                                    <div class="flex items-center justify-center mb-3">
                                        <div class="w-12 h-12 bg-gradient-to-br from-blue-400 to-cyan-400 rounded-full flex items-center justify-center">
                                            <span class="text-2xl">üíß</span>
                                        </div>
                                    </div>
                                    <div class="text-lg font-black text-gray-800 mb-2">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏î‡∏ä‡∏∑‡πà‡∏ô</div>
                                    <div class="w-full bg-gray-200 rounded-full h-3 mb-2">
                                        <div id="waterBarLarge" class="bg-gradient-to-r from-blue-400 to-cyan-400 h-3 rounded-full progress-fill" style="width: 70%"></div>
                                    </div>
                                    <div class="text-lg font-bold text-gray-600" id="waterValueLarge">70/100</div>
                                </div>
                                
                                <!-- Happiness -->
                                <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-4 shadow-lg">
                                    <div class="flex items-center justify-center mb-3">
                                        <div class="w-12 h-12 bg-gradient-to-br from-yellow-400 to-pink-400 rounded-full flex items-center justify-center">
                                            <span class="text-2xl">üòä</span>
                                        </div>
                                    </div>
                                    <div class="text-lg font-black text-gray-800 mb-2">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç</div>
                                    <div class="w-full bg-gray-200 rounded-full h-3 mb-2">
                                        <div id="happinessBarLarge" class="bg-gradient-to-r from-yellow-400 to-pink-400 h-3 rounded-full progress-fill" style="width: 90%"></div>
                                    </div>
                                    <div class="text-lg font-bold text-gray-600" id="happinessValueLarge">90/100</div>
                                </div>
                                
                                <!-- Health -->
                                <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-4 shadow-lg">
                                    <div class="flex items-center justify-center mb-3">
                                        <div class="w-12 h-12 bg-gradient-to-br from-green-400 to-emerald-400 rounded-full flex items-center justify-center">
                                            <span class="text-2xl">‚ù§Ô∏è</span>
                                        </div>
                                    </div>
                                    <div class="text-lg font-black text-gray-800 mb-2">‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</div>
                                    <div class="w-full bg-gray-200 rounded-full h-3 mb-2">
                                        <div id="healthBarLarge" class="bg-gradient-to-r from-green-400 to-emerald-400 h-3 rounded-full progress-fill" style="width: 100%"></div>
                                    </div>
                                    <div class="text-lg font-bold text-gray-600" id="healthValueLarge">100/100</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pet Care Tips -->
                    <div class="bg-gradient-to-r from-gray-100 to-gray-200 p-6 rounded-3xl text-center">
                        <div class="text-lg font-black text-gray-700 mb-2">üí° ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•</div>
                        <div class="text-sm text-gray-600 font-medium">‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡πÅ‡∏•‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô!</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Game State
        let gameState = {
            streak: 0,
            coins: 0,
            day: 1,
            readingGoal: 10,
            readingTime: 0,
            totalReadingTime: 0,
            completedGoals: 0,
            lastVisit: null,
            todayCompleted: false,
            dailyQuests: {
                lastReset: null,
                quests: [],
                completedToday: 0
            },
            questProgress: {
                meditation: 0,
                reading: 0,
                brainGames: 0,
                petCare: 0,
                coins: 0
            },
            pet: {
                food: 80,
                water: 70,
                happiness: 90,
                health: 100,
                name: '‡∏°‡∏¥‡∏ß‡∏°‡∏¥‡∏ß'
            }
        };

        // Game Variables
        let memoryCards = [];
        let flippedCards = [];
        let gameScore = 0;
        let gameTimeLeft = 0;
        let gameInterval;
        let meditationInterval;
        let readingInterval;
        let moveCounter = 0;
        let memoryGridSize = 4;
        
        // Reaction Game Variables
        let reactionRound = 1;
        let reactionTimes = [];
        let reactionStartTime = 0;
        let reactionTimeout;
        let waitingForGreen = false;
        let maxReactionRounds = 5;
        let isAdvancedMode = false;
        
        // Start advanced reaction game
        function startAdvancedReactionGame() {
            isAdvancedMode = true;
            maxReactionRounds = 10;
            reactionRound = 1;
            reactionTimes = [];
            waitingForGreen = false;
            document.getElementById('reactionRound').textContent = reactionRound;
            document.getElementById('avgReactionTime').textContent = '-';
            document.getElementById('reactionMessage').textContent = 'üî• ‡πÇ‡∏´‡∏°‡∏î‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢! ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ï‡∏±‡∏ß...';
            resetCircles();
            
            // Start first round after 2 seconds
            setTimeout(() => {
                nextReactionRound();
            }, 2000);
        }
        
        // Word Memory Game Variables
        let wordLevel = 1;
        let wordScore = 0;
        let originalWordsList = [];
        let currentWordCount = 5;
        let isExpertWordMode = false;
        let wordTimeLimit = 5;
        
        // Start expert word game
        function startExpertWordGame() {
            isExpertWordMode = true;
            wordLevel = 1;
            wordScore = 0;
            currentWordCount = 20;
            wordTimeLimit = 3; // Reduced time for expert mode
            document.getElementById('wordLevel').textContent = wordLevel;
            document.getElementById('wordScore').textContent = wordScore;
            document.getElementById('wordCount').textContent = currentWordCount;
            alert('üî• ‡πÇ‡∏´‡∏°‡∏î‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç!\n‚Ä¢ 20 ‡∏Ñ‡∏≥‡πÉ‡∏ô‡∏£‡∏≠‡∏ö‡πÅ‡∏£‡∏Å\n‚Ä¢ ‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏≥‡πÄ‡∏û‡∏µ‡∏¢‡∏á 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ\n‚Ä¢ ‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç x2');
            startWordRound();
        }
        
        let wordBank = [
            '‡πÅ‡∏°‡∏ß', '‡∏´‡∏°‡∏≤', '‡∏ô‡∏Å', '‡∏õ‡∏•‡∏≤', '‡∏ä‡πâ‡∏≤‡∏á', '‡πÄ‡∏™‡∏∑‡∏≠', '‡∏´‡∏°‡∏µ', '‡∏Å‡∏ö', '‡∏á‡∏π', '‡∏•‡∏¥‡∏á',
            '‡∏ö‡πâ‡∏≤‡∏ô', '‡∏£‡∏ñ', '‡πÄ‡∏£‡∏∑‡∏≠', '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ö‡∏¥‡∏ô', '‡∏£‡∏ñ‡πÑ‡∏ü', '‡∏à‡∏±‡∏Å‡∏£‡∏¢‡∏≤‡∏ô', '‡∏°‡∏≠‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÑ‡∏ã‡∏Ñ‡πå', '‡∏£‡∏ñ‡∏ö‡∏±‡∏™', '‡πÅ‡∏ó‡πá‡∏Å‡∏ã‡∏µ‡πà', '‡∏£‡∏ñ‡∏ï‡∏π‡πâ',
            '‡∏Ç‡πâ‡∏≤‡∏ß', '‡∏ô‡πâ‡∏≥', '‡∏ô‡∏°', '‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á', '‡∏ú‡∏•‡πÑ‡∏°‡πâ', '‡∏ú‡∏±‡∏Å', '‡πÄ‡∏ô‡∏∑‡πâ‡∏≠', '‡∏õ‡∏•‡∏≤', '‡πÑ‡∏Ç‡πà', '‡∏ä‡∏≤',
            '‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠', '‡∏õ‡∏≤‡∏Å‡∏Å‡∏≤', '‡∏î‡∏¥‡∏ô‡∏™‡∏≠', '‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©', '‡πÇ‡∏ï‡πä‡∏∞', '‡πÄ‡∏Å‡πâ‡∏≤‡∏≠‡∏µ‡πâ', '‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå', '‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå', '‡∏ô‡∏≤‡∏¨‡∏¥‡∏Å‡∏≤', '‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤',
            '‡∏î‡∏ß‡∏á‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå', '‡∏î‡∏ß‡∏á‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå', '‡∏î‡∏≤‡∏ß', '‡∏ü‡πâ‡∏≤', '‡πÄ‡∏°gh', '‡∏ù‡∏ô', '‡∏´‡∏¥‡∏°‡∏∞', '‡∏•‡∏°', '‡πÑ‡∏ü', '‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á',
            '‡∏™‡∏µ‡πÅ‡∏î‡∏á', '‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß', '‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô', '‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á', '‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á', '‡∏™‡∏µ‡∏™‡πâ‡∏°', '‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π', '‡∏™‡∏µ‡∏î‡∏≥', '‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß', '‡∏™‡∏µ‡πÄ‡∏ó‡∏≤'
        ];

        // Daily Quest System
        const questTemplates = [
            { id: 'meditation_5min', type: 'meditation', target: 5, reward: 3, emoji: 'üßò‚Äç‚ôÄÔ∏è', title: '‡∏ô‡∏±‡πà‡∏á‡∏™‡∏°‡∏≤‡∏ò‡∏¥ 5 ‡∏ô‡∏≤‡∏ó‡∏µ', description: '‡∏ù‡∏∂‡∏Å‡∏™‡∏°‡∏≤‡∏ò‡∏¥‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏¥‡∏ï‡πÉ‡∏à‡∏ó‡∏µ‡πà‡∏™‡∏á‡∏ö' },
            { id: 'reading_5min', type: 'reading', target: 5, reward: 3, emoji: 'üìö', title: '‡∏≠‡πà‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠ 5 ‡∏ô‡∏≤‡∏ó‡∏µ', description: '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏û‡∏π‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô' },
            { id: 'brain_games_3', type: 'brainGames', target: 3, reward: 5, emoji: 'üß†', title: '‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°‡∏™‡∏°‡∏≠‡∏á 3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á', description: '‡∏ù‡∏∂‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥‡πÅ‡∏•‡∏∞‡∏™‡∏°‡∏≤‡∏ò‡∏¥' },
            { id: 'pet_care_5', type: 'petCare', target: 5, reward: 3, emoji: 'üê±', title: '‡∏î‡∏π‡πÅ‡∏•‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á 5 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á', description: '‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡πà‡∏ô‡∏Å‡∏±‡∏ö‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á' },
            { id: 'earn_coins_10', type: 'coins', target: 10, reward: 2, emoji: 'ü™ô', title: '‡∏£‡∏±‡∏ö‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç 10 ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç', description: '‡∏ó‡∏≥‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç' },
            { id: 'meditation_10min', type: 'meditation', target: 10, reward: 6, emoji: 'üßò‚Äç‚ôÄÔ∏è', title: '‡∏ô‡∏±‡πà‡∏á‡∏™‡∏°‡∏≤‡∏ò‡∏¥ 10 ‡∏ô‡∏≤‡∏ó‡∏µ', description: '‡∏ù‡∏∂‡∏Å‡∏™‡∏°‡∏≤‡∏ò‡∏¥‡∏£‡∏∞‡∏¢‡∏∞‡∏¢‡∏≤‡∏ß' },
            { id: 'reading_10min', type: 'reading', target: 10, reward: 5, emoji: 'üìñ', title: '‡∏≠‡πà‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠ 10 ‡∏ô‡∏≤‡∏ó‡∏µ', description: '‡∏≠‡πà‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏Ñ‡∏£‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô' },
            { id: 'brain_games_5', type: 'brainGames', target: 5, reward: 8, emoji: 'üéÆ', title: '‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°‡∏™‡∏°‡∏≠‡∏á 5 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á', description: '‡∏ù‡∏∂‡∏Å‡∏™‡∏°‡∏≠‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á' },
            { id: 'pet_happiness_90', type: 'petCare', target: 90, reward: 5, emoji: 'üò∏', title: '‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç 90+', description: '‡∏î‡∏π‡πÅ‡∏•‡πÉ‡∏´‡πâ‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç' },
            { id: 'earn_coins_20', type: 'coins', target: 20, reward: 4, emoji: 'üí∞', title: '‡∏£‡∏±‡∏ö‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç 20 ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç', description: '‡∏™‡∏∞‡∏™‡∏°‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏à‡∏≤‡∏Å‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ï‡πà‡∏≤‡∏á‡πÜ' }
        ];

        function generateDailyQuests() {
            const today = new Date().toDateString();
            
            // Check if quests need to be reset
            if (!gameState.dailyQuests.lastReset || gameState.dailyQuests.lastReset !== today) {
                // Reset daily quests
                gameState.dailyQuests.lastReset = today;
                gameState.dailyQuests.completedToday = 0;
                
                // Reset quest progress
                gameState.questProgress = {
                    meditation: 0,
                    reading: 0,
                    brainGames: 0,
                    petCare: 0,
                    coins: 0
                };
                
                // Generate 5 random quests for today
                const shuffled = [...questTemplates].sort(() => Math.random() - 0.5);
                gameState.dailyQuests.quests = shuffled.slice(0, 5).map(template => ({
                    ...template,
                    completed: false,
                    progress: 0
                }));
                
                saveGameState();
            }
        }

        function updateQuestProgress(type, amount = 1) {
            if (!gameState.questProgress[type]) gameState.questProgress[type] = 0;
            gameState.questProgress[type] += amount;
            
            // Check and update quest completion
            gameState.dailyQuests.quests.forEach(quest => {
                if (quest.type === type && !quest.completed) {
                    if (type === 'petCare' && quest.id === 'pet_happiness_90') {
                        // Special case for pet happiness quest
                        quest.progress = gameState.pet.happiness;
                    } else {
                        quest.progress = Math.min(gameState.questProgress[type], quest.target);
                    }
                    
                    if (quest.progress >= quest.target && !quest.completed) {
                        completeQuest(quest);
                    }
                }
            });
            
            updateQuestDisplay();
            saveGameState();
        }

        function completeQuest(quest) {
            quest.completed = true;
            gameState.dailyQuests.completedToday++;
            gameState.coins += quest.reward;
            
            // Show quest completion notification
            showQuestNotification(quest);
            
            // Check if all quests are completed
            if (gameState.dailyQuests.completedToday === gameState.dailyQuests.quests.length) {
                setTimeout(() => {
                    const bonusCoins = 10;
                    gameState.coins += bonusCoins;
                    alert(`üéâ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏ó‡∏≥ Daily Quest ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏Ç‡πâ‡∏≠‡πÅ‡∏•‡πâ‡∏ß!\n\nüí∞ ‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏û‡∏¥‡πÄ‡∏®‡∏©: +${bonusCoins} ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç\nüèÜ ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡∏ô‡∏±‡∏Å‡∏ú‡∏à‡∏ç‡∏†‡∏±‡∏¢‡∏ó‡∏µ‡πà‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°!`);
                    updateUI();
                    saveGameState();
                }, 1500);
            }
            
            updateUI();
            saveGameState();
        }

        function showQuestNotification(quest) {
            const notification = document.createElement('div');
            notification.className = 'fixed top-20 left-6 z-50 bg-gradient-to-r from-purple-400 to-pink-400 text-white px-6 py-4 rounded-2xl shadow-2xl transform -translate-x-full transition-all duration-500';
            notification.innerHTML = `
                <div class="flex items-center space-x-3">
                    <div class="text-3xl animate-bounce">${quest.emoji}</div>
                    <div>
                        <div class="font-black text-lg">Quest ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</div>
                        <div class="text-sm opacity-90">${quest.title}</div>
                        <div class="text-xs opacity-75">+${quest.reward} ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç</div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.classList.remove('-translate-x-full');
            }, 100);
            
            // Animate out and remove
            setTimeout(() => {
                notification.classList.add('-translate-x-full');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 500);
            }, 3000);
        }

        function updateQuestDisplay() {
            const questList = document.getElementById('questList');
            const completedQuests = document.getElementById('completedQuests');
            const totalQuests = document.getElementById('totalQuests');
            const questProgress = document.getElementById('questProgress');
            
            if (!questList) return;
            
            questList.innerHTML = '';
            
            gameState.dailyQuests.quests.forEach(quest => {
                const questElement = document.createElement('div');
                const progressPercent = Math.min((quest.progress / quest.target) * 100, 100);
                const isCompleted = quest.completed;
                
                questElement.className = `p-3 rounded-xl border-2 transition-all ${
                    isCompleted 
                        ? 'bg-green-100 border-green-300' 
                        : 'bg-white border-gray-200 hover:border-purple-300'
                }`;
                
                questElement.innerHTML = `
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center space-x-3">
                            <div class="text-2xl ${isCompleted ? 'grayscale' : ''}">${quest.emoji}</div>
                            <div>
                                <div class="font-bold text-gray-800 text-sm ${isCompleted ? 'line-through' : ''}">${quest.title}</div>
                                <div class="text-xs text-gray-600">${quest.description}</div>
                            </div>
                        </div>
                        <div class="text-right">
                            ${isCompleted 
                                ? '<div class="text-green-600 font-black text-lg">‚úì</div>' 
                                : `<div class="text-purple-600 font-black text-sm">+${quest.reward} ü™ô</div>`
                            }
                        </div>
                    </div>
                    <div class="flex items-center justify-between text-xs">
                        <div class="bg-gray-200 rounded-full h-2 flex-1 mr-3">
                            <div class="bg-gradient-to-r ${
                                isCompleted 
                                    ? 'from-green-400 to-emerald-400' 
                                    : 'from-purple-400 to-pink-400'
                            } h-2 rounded-full transition-all duration-500" style="width: ${progressPercent}%"></div>
                        </div>
                        <div class="font-bold ${isCompleted ? 'text-green-600' : 'text-gray-600'}">
                            ${quest.progress}/${quest.target}
                        </div>
                    </div>
                `;
                
                questList.appendChild(questElement);
            });
            
            // Update summary
            const completed = gameState.dailyQuests.completedToday;
            const total = gameState.dailyQuests.quests.length;
            
            if (completedQuests) completedQuests.textContent = completed;
            if (totalQuests) totalQuests.textContent = total;
            if (questProgress) {
                const progressPercent = total > 0 ? (completed / total) * 100 : 0;
                questProgress.style.width = progressPercent + '%';
            }
        }

        function updateQuestTimer() {
            const now = new Date();
            const tomorrow = new Date(now);
            tomorrow.setDate(tomorrow.getDate() + 1);
            tomorrow.setHours(0, 0, 0, 0);
            
            const timeLeft = tomorrow - now;
            const hours = Math.floor(timeLeft / (1000 * 60 * 60));
            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
            
            const questResetTime = document.getElementById('questResetTime');
            if (questResetTime) {
                questResetTime.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }
        }

        // Firebase user management
        let currentUserId = null;
        let currentUser = null;
        let isFirebaseReady = false;
        let isAuthenticated = false;

        // Update connection status indicator
        function updateConnectionStatus(status, message) {
            const statusElement = document.getElementById('connectionStatus');
            if (!statusElement) return;

            switch (status) {
                case 'connecting':
                    statusElement.className = 'bg-gradient-to-r from-yellow-100 to-orange-100 px-3 py-2 rounded-full border border-yellow-200';
                    statusElement.innerHTML = '<div class="text-center"><div class="text-xs font-bold text-orange-600">üîÑ ' + message + '</div></div>';
                    break;
                case 'connected':
                    statusElement.className = 'bg-gradient-to-r from-green-100 to-emerald-100 px-3 py-2 rounded-full border border-green-200';
                    statusElement.innerHTML = '<div class="text-center"><div class="text-xs font-bold text-green-600">üî• ' + message + '</div></div>';
                    break;
                case 'offline':
                    statusElement.className = 'bg-gradient-to-r from-red-100 to-pink-100 px-3 py-2 rounded-full border border-red-200';
                    statusElement.innerHTML = '<div class="text-center"><div class="text-xs font-bold text-red-600">üì± ' + message + '</div></div>';
                    break;
            }
        }

        // Initialize Firebase authentication
        function initializeFirebase() {
            const { onAuthStateChanged } = window.firebaseUtils;
            
            updateConnectionStatus('connecting', '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠...');
            
            onAuthStateChanged(window.firebaseAuth, (user) => {
                if (user) {
                    currentUserId = user.uid;
                    currentUser = user;
                    isFirebaseReady = true;
                    isAuthenticated = true;
                    
                    console.log('üî• Firebase connected! User:', user.email || 'Anonymous');
                    updateConnectionStatus('connected', '‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÅ‡∏•‡πâ‡∏ß');
                    
                    // Update UI for authenticated user
                    updateUserProfile(user);
                    hideAuthPrompt();
                    
                    loadGameState();
                } else {
                    // User is signed out
                    currentUserId = null;
                    currentUser = null;
                    isAuthenticated = false;
                    
                    console.log('üî• User signed out');
                    updateConnectionStatus('offline', '‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö');
                    
                    // Show authentication prompt
                    showAuthPrompt();
                    
                    // Load from localStorage as fallback
                    loadGameStateFromLocal();
                }
            });
        }

        // Load saved data from Firebase
        async function loadGameState() {
            if (!isFirebaseReady || !currentUserId) {
                console.log('Firebase not ready, using localStorage');
                loadGameStateFromLocal();
                return;
            }

            try {
                const { doc, getDoc } = window.firebaseUtils;
                const docRef = doc(window.firebaseDB, 'users', currentUserId);
                const docSnap = await getDoc(docRef);

                if (docSnap.exists()) {
                    const savedData = docSnap.data();
                    gameState = { ...gameState, ...savedData };
                    console.log('‚úÖ Data loaded from Firebase');
                    
                    // Set up real-time listener for data changes
                    setupRealtimeListener();
                } else {
                    console.log('No Firebase data found, checking localStorage');
                    // Try to migrate from localStorage
                    const localData = localStorage.getItem('brainBoosterApp');
                    if (localData) {
                        gameState = { ...gameState, ...JSON.parse(localData) };
                        console.log('üì¶ Migrated data from localStorage to Firebase');
                        await saveGameState(); // Save to Firebase
                        localStorage.removeItem('brainBoosterApp'); // Clean up
                    }
                }
            } catch (error) {
                console.error('Error loading from Firebase:', error);
                loadGameStateFromLocal();
            }

            checkDailyVisit();
            generateDailyQuests();
            updateUI();
        }

        // Fallback to localStorage
        function loadGameStateFromLocal() {
            const saved = localStorage.getItem('brainBoosterApp');
            if (saved) {
                gameState = { ...gameState, ...JSON.parse(saved) };
            }
            checkDailyVisit();
            generateDailyQuests();
            updateUI();
        }

        // Check daily visit and streak
        function checkDailyVisit() {
            const today = new Date().toDateString();
            
            if (gameState.lastVisit) {
                const lastVisit = new Date(gameState.lastVisit);
                const todayDate = new Date();
                const diffTime = todayDate - lastVisit;
                const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
                
                if (diffDays > 1) {
                    // Missed a day - reset streak
                    gameState.streak = 0;
                    gameState.todayCompleted = false;
                    alert('üò¢ ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏ô Streak ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÅ‡∏•‡πâ‡∏ß! ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏Å‡∏±‡∏ô‡πÄ‡∏ñ‡∏≠‡∏∞ üí™');
                } else if (diffDays === 1) {
                    // New day
                    gameState.todayCompleted = false;
                }
            }
            
            gameState.lastVisit = today;
            saveGameState();
        }

        // Set up real-time listener for data synchronization
        function setupRealtimeListener() {
            if (!isFirebaseReady || !currentUserId) return;

            try {
                const { doc, onSnapshot } = window.firebaseUtils;
                const docRef = doc(window.firebaseDB, 'users', currentUserId);
                
                onSnapshot(docRef, (doc) => {
                    if (doc.exists()) {
                        const serverData = doc.data();
                        const serverTimestamp = new Date(serverData.lastUpdated || 0);
                        const localTimestamp = new Date(gameState.lastUpdated || 0);
                        
                        // Only update if server data is newer
                        if (serverTimestamp > localTimestamp) {
                            console.log('üîÑ Syncing newer data from server');
                            gameState = { ...gameState, ...serverData };
                            updateUI();
                            
                            // Show sync notification
                            showSyncNotification('‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏à‡∏≤‡∏Å‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå');
                        }
                    }
                }, (error) => {
                    console.error('Real-time listener error:', error);
                });
            } catch (error) {
                console.error('Error setting up real-time listener:', error);
            }
        }

        // Show sync notification
        function showSyncNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'fixed top-20 right-6 z-50 bg-gradient-to-r from-blue-400 to-purple-400 text-white px-4 py-3 rounded-2xl shadow-2xl transform translate-x-full transition-all duration-500';
            notification.innerHTML = `
                <div class="flex items-center space-x-2">
                    <div class="text-lg">üîÑ</div>
                    <div class="text-sm font-bold">${message}</div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.classList.remove('translate-x-full');
            }, 100);
            
            // Animate out and remove
            setTimeout(() => {
                notification.classList.add('translate-x-full');
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 500);
            }, 3000);
        }

        // Save game data to Firebase
        async function saveGameState() {
            // Always save to localStorage as backup
            localStorage.setItem('brainBoosterApp', JSON.stringify(gameState));

            if (!isFirebaseReady || !currentUserId) {
                console.log('Firebase not ready, saved to localStorage only');
                return;
            }

            try {
                const { doc, setDoc } = window.firebaseUtils;
                const docRef = doc(window.firebaseDB, 'users', currentUserId);
                
                // Add timestamp for tracking
                const dataToSave = {
                    ...gameState,
                    lastUpdated: new Date().toISOString(),
                    version: '1.0'
                };

                await setDoc(docRef, dataToSave, { merge: true });
                console.log('‚úÖ Data saved to Firebase');
            } catch (error) {
                console.error('Error saving to Firebase:', error);
                // Data is still saved to localStorage as backup
            }
        }

        // Update UI elements
        function updateUI() {
            document.getElementById('streakCount').textContent = gameState.streak;
            document.getElementById('coinCount').textContent = gameState.coins;
            document.getElementById('dayCount').textContent = gameState.day;
            document.getElementById('currentReadingStreak').textContent = gameState.streak + ' ‡∏ß‡∏±‡∏ô!';
            document.getElementById('streakDisplay').textContent = gameState.streak + ' ‡∏ß‡∏±‡∏ô';
            document.getElementById('shopCoinDisplay').textContent = gameState.coins;
            
            // Update pet stats
            updatePetStats();
            updatePetMood();
            updatePetOverallStatus();
            
            // Update reading progress
            updateReadingProgress();
            
            // Update quest display
            updateQuestDisplay();
            
            // Update streak progress
            const streakProgress = Math.min((gameState.streak / 30) * 100, 100);
            document.getElementById('streakProgress').style.width = streakProgress + '%';
        }

        function updatePetStats() {
            const pet = gameState.pet;
            
            // Update small pet stats (top section)
            document.getElementById('foodValue').textContent = pet.food + '/100';
            document.getElementById('waterValue').textContent = pet.water + '/100';
            document.getElementById('happinessValue').textContent = pet.happiness + '/100';
            document.getElementById('healthValue').textContent = pet.health + '/100';
            
            document.getElementById('foodBar').style.width = pet.food + '%';
            document.getElementById('waterBar').style.width = pet.water + '%';
            document.getElementById('happinessBar').style.width = pet.happiness + '%';
            document.getElementById('healthBar').style.width = pet.health + '%';
            
            // Update large pet stats (pet section)
            const foodValueLarge = document.getElementById('foodValueLarge');
            const waterValueLarge = document.getElementById('waterValueLarge');
            const happinessValueLarge = document.getElementById('happinessValueLarge');
            const healthValueLarge = document.getElementById('healthValueLarge');
            const foodBarLarge = document.getElementById('foodBarLarge');
            const waterBarLarge = document.getElementById('waterBarLarge');
            const happinessBarLarge = document.getElementById('happinessBarLarge');
            const healthBarLarge = document.getElementById('healthBarLarge');
            
            if (foodValueLarge) foodValueLarge.textContent = pet.food + '/100';
            if (waterValueLarge) waterValueLarge.textContent = pet.water + '/100';
            if (happinessValueLarge) happinessValueLarge.textContent = pet.happiness + '/100';
            if (healthValueLarge) healthValueLarge.textContent = pet.health + '/100';
            
            if (foodBarLarge) foodBarLarge.style.width = pet.food + '%';
            if (waterBarLarge) waterBarLarge.style.width = pet.water + '%';
            if (happinessBarLarge) happinessBarLarge.style.width = pet.happiness + '%';
            if (healthBarLarge) healthBarLarge.style.width = pet.health + '%';
            
            // Change pet emoji based on health and happiness
            let emoji = 'üê±';
            if (pet.health <= 0) {
                emoji = 'üíÄ';
            } else if (pet.health < 30) {
                emoji = 'üòµ';
            } else if (pet.happiness > 90) {
                emoji = 'üò∏';
            } else if (pet.happiness < 30) {
                emoji = 'üòø';
            } else if (pet.food < 20) {
                emoji = 'üòã';
            } else if (pet.water < 20) {
                emoji = 'üò¥';
            }
            
            document.getElementById('petEmoji').textContent = emoji;
            document.getElementById('petEmojiLarge').textContent = emoji;
            document.getElementById('petName').textContent = pet.name;
            document.getElementById('petNameLarge').textContent = pet.name;
        }

        function updatePetMood() {
            const pet = gameState.pet;
            let moodEmoji = 'üò∏';
            let moodText = '‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏°‡∏≤‡∏Å!';
            
            if (pet.health <= 0) {
                moodEmoji = 'üíÄ';
                moodText = '‡πÑ‡∏°‡πà‡∏™‡∏ö‡∏≤‡∏¢...';
            } else if (pet.health < 30) {
                moodEmoji = 'üòµ';
                moodText = '‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡πÑ‡∏°‡πà‡∏Ñ‡πà‡∏≠‡∏¢‡∏î‡∏µ';
            } else if (pet.happiness > 90 && pet.food > 70 && pet.water > 70) {
                moodEmoji = 'ü•∞';
                moodText = '‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î!';
            } else if (pet.happiness > 70) {
                moodEmoji = 'üò∏';
                moodText = '‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏°‡∏≤‡∏Å!';
            } else if (pet.happiness > 50) {
                moodEmoji = 'üòä';
                moodText = '‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏î‡∏µ';
            } else if (pet.happiness > 30) {
                moodEmoji = 'üòê';
                moodText = '‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤';
            } else if (pet.food < 20) {
                moodEmoji = 'üòã';
                moodText = '‡∏´‡∏¥‡∏ß‡∏Ç‡πâ‡∏≤‡∏ß...';
            } else if (pet.water < 20) {
                moodEmoji = 'üò¥';
                moodText = '‡∏Å‡∏£‡∏∞‡∏´‡∏≤‡∏¢‡∏ô‡πâ‡∏≥...';
            } else {
                moodEmoji = 'üòø';
                moodText = '‡πÄ‡∏®‡∏£‡πâ‡∏≤...';
            }
            
            document.getElementById('petMoodEmoji').textContent = moodEmoji;
            document.getElementById('petMoodText').textContent = moodText;
        }

        function updatePetOverallStatus() {
            const pet = gameState.pet;
            const avgStats = (pet.food + pet.water + pet.happiness + pet.health) / 4;
            let status = '‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏î‡∏µ';
            
            if (avgStats >= 90) {
                status = '‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏î‡∏µ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°!';
            } else if (avgStats >= 70) {
                status = '‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏î‡∏µ';
            } else if (avgStats >= 50) {
                status = '‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á';
            } else if (avgStats >= 30) {
                status = '‡∏ï‡πâ‡∏≠‡∏á‡∏î‡∏π‡πÅ‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°';
            } else {
                status = '‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠!';
            }
            
            document.getElementById('petOverallStatus').textContent = status;
        }

        // Section navigation
        function showSection(section) {
            // Hide main menu and show section
            document.querySelector('.max-w-4xl').style.display = 'none';
            document.querySelectorAll('.section').forEach(s => s.classList.add('hidden'));
            
            // Show selected section
            document.getElementById(section + 'Section').classList.remove('hidden');
            
            // Add back button if not exists
            const sectionElement = document.getElementById(section + 'Section');
            if (!sectionElement.querySelector('.back-button')) {
                const backButton = document.createElement('button');
                backButton.className = 'back-button fixed top-4 left-4 z-50 bg-white/90 backdrop-blur-xl rounded-full p-3 shadow-lg hover:bg-white transition-all transform hover:scale-105';
                backButton.innerHTML = '<span class="text-xl">‚Üê</span>';
                backButton.onclick = showMainMenu;
                sectionElement.insertBefore(backButton, sectionElement.firstChild);
            }
        }
        
        function showMainMenu() {
            // Show main menu and hide sections
            document.querySelector('.max-w-4xl').style.display = 'block';
            document.querySelectorAll('.section').forEach(s => s.classList.add('hidden'));
        }

        // Award coins and check for daily streak
        function awardCoinsAndStreak(coins, activity, details = '') {
            gameState.coins += coins;
            
            // Update quest progress for coins earned
            updateQuestProgress('coins', coins);
            
            // Create animated notification
            showCoinNotification(coins, activity);
            
            let message = '';
            if (!gameState.todayCompleted) {
                gameState.streak += 1;
                gameState.todayCompleted = true;
                message = `üéâ ${activity} ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!\n\nüí∞ ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö ${coins} ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç\nüî• Streak +1 ‡∏ß‡∏±‡∏ô!\n‚è∞ ‡πÄ‡∏ß‡∏•‡∏≤: ${new Date().toLocaleTimeString('th-TH')}`;
            } else {
                message = `üéâ ${activity} ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!\n\nüí∞ ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö ${coins} ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç\n‚è∞ ‡πÄ‡∏ß‡∏•‡∏≤: ${new Date().toLocaleTimeString('th-TH')}`;
            }
            
            if (details) {
                message += `\n\nüìä ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:\n${details}`;
            }
            
            // Show detailed alert after notification
            setTimeout(() => {
                alert(message);
            }, 1500);
            
            updateUI();
            saveGameState();
        }

        // Show animated coin notification
        function showCoinNotification(coins, activity) {
            const notification = document.createElement('div');
            notification.className = 'fixed top-20 right-6 z-50 bg-gradient-to-r from-yellow-400 to-orange-400 text-white px-6 py-4 rounded-2xl shadow-2xl transform translate-x-full transition-all duration-500';
            notification.innerHTML = `
                <div class="flex items-center space-x-3">
                    <div class="text-3xl animate-bounce">ü™ô</div>
                    <div>
                        <div class="font-black text-lg">+${coins} ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç!</div>
                        <div class="text-sm opacity-90">${activity}</div>
                        <div class="text-xs opacity-75">${new Date().toLocaleTimeString('th-TH')}</div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.classList.remove('translate-x-full');
            }, 100);
            
            // Animate out and remove
            setTimeout(() => {
                notification.classList.add('translate-x-full');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 500);
            }, 3000);
        }

        // Custom time toggle functions
        function toggleCustomMeditationTime() {
            const select = document.getElementById('meditationTime');
            const customDiv = document.getElementById('customMeditationTime');
            
            if (select && customDiv) {
                if (select.value === 'custom') {
                    customDiv.classList.remove('hidden');
                    // Focus on the input field
                    const customInput = document.getElementById('customMeditationMinutes');
                    if (customInput) {
                        setTimeout(() => customInput.focus(), 100);
                    }
                } else {
                    customDiv.classList.add('hidden');
                }
            }
        }
        
        function toggleCustomReadingTime() {
            const select = document.getElementById('readingTime');
            const customDiv = document.getElementById('customReadingTime');
            
            if (select.value === 'custom') {
                customDiv.classList.remove('hidden');
            } else {
                customDiv.classList.add('hidden');
            }
        }
        
        function getMeditationTime() {
            const select = document.getElementById('meditationTime');
            if (select.value === 'custom') {
                const customInput = document.getElementById('customMeditationMinutes');
                if (customInput) {
                    const customTime = parseInt(customInput.value) || 5; // Default to 5 if invalid
                    return Math.max(1, Math.min(120, customTime)); // Limit between 1-120 minutes
                }
                return 5; // Fallback
            }
            return parseInt(select.value);
        }
        
        function getReadingTime() {
            const select = document.getElementById('readingTime');
            if (select.value === 'custom') {
                const customTime = parseInt(document.getElementById('customReadingMinutes').value);
                return Math.max(1, Math.min(300, customTime)); // Limit between 1-300 minutes
            }
            return parseInt(select.value);
        }

        // Meditation functionality
        function startMeditation() {
            const time = getMeditationTime();
            const btn = document.getElementById('meditationBtn');
            const timer = document.getElementById('meditationTimer');
            
            // Validate time
            if (!time || time < 1 || time > 120) {
                alert('‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤ 1-120 ‡∏ô‡∏≤‡∏ó‡∏µ');
                return;
            }
            
            let seconds = time * 60;
            btn.textContent = 'üßò‚Äç‚ôÄÔ∏è ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ô‡∏±‡πà‡∏á‡∏™‡∏°‡∏≤‡∏ò‡∏¥...';
            btn.disabled = true;
            timer.classList.remove('hidden');
            
            meditationInterval = setInterval(() => {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                timer.textContent = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
                
                if (seconds <= 0) {
                    clearInterval(meditationInterval);
                    btn.textContent = 'üå∏ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ô‡∏±‡πà‡∏á‡∏™‡∏°‡∏≤‡∏ò‡∏¥';
                    btn.disabled = false;
                    timer.classList.add('hidden');
                    
                    // Update quest progress
                    updateQuestProgress('meditation', time);
                    
                    // Award coins and streak
                    const coinsEarned = Math.max(1, Math.floor(time / 2)); // 1 coin per 2 minutes
                    const details = `‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏±‡πà‡∏á‡∏™‡∏°‡∏≤‡∏ò‡∏¥: ${time} ‡∏ô‡∏≤‡∏ó‡∏µ\n‡∏≠‡∏±‡∏ï‡∏£‡∏≤: 1 ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç/2 ‡∏ô‡∏≤‡∏ó‡∏µ`;
                    awardCoinsAndStreak(coinsEarned, '‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡πà‡∏á‡∏™‡∏°‡∏≤‡∏ò‡∏¥', details);
                }
                seconds--;
            }, 1000);
        }

        // Memory Game Functions
        let matchedPairs = 0;
        let totalPairs = 8;
        let memoryRound = 1;
        
        // Get next difficulty name
        function getNextDifficultyName(currentSize) {
            if (currentSize === 2) return '‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á (4x4)';
            if (currentSize === 4) return '‡∏¢‡∏≤‡∏Å (6x6)';
            return '‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢ (8x8)';
        }
        
        // Create custom memory challenge for advanced players
        function createCustomMemoryChallenge() {
            memoryGridSize = 8;
            memoryRound++;
            alert(`üî• ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢! ‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà ${memoryRound}\n‡∏ï‡∏≤‡∏£‡∏≤‡∏á 8x8 ‡∏Å‡∏±‡∏ö 32 ‡∏Ñ‡∏π‡πà!\nüí∞ ‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•: ${15 + memoryRound * 5} ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç`);
            createMemoryGame();
        }
        
        function setMemoryDifficulty(size) {
            memoryGridSize = size;
            createMemoryGame();
        }
        
        function createMemoryGame() {
            const emojis = ['üê±', 'üê∂', 'üê∞', 'ü¶ä', 'üêª', 'üêº', 'üê®', 'üêØ', 'üê∏', 'ü¶Ñ', 'üê∑', 'üêµ', 'üê∫', 'ü¶Å', 'üêÆ', 'üê≠', 'üêπ', 'üêô'];
            const pairsNeeded = (memoryGridSize * memoryGridSize) / 2;
            const selectedEmojis = emojis.slice(0, pairsNeeded);
            const gameEmojis = [...selectedEmojis, ...selectedEmojis].sort(() => Math.random() - 0.5);
            
            const cardsContainer = document.getElementById('memoryCards');
            cardsContainer.innerHTML = '';
            
            // Use fixed grid classes instead of template literals
            let gridClass = 'grid-cols-2';
            if (memoryGridSize === 4) gridClass = 'grid-cols-4';
            if (memoryGridSize === 6) gridClass = 'grid-cols-6';
            cardsContainer.className = `grid ${gridClass} gap-4 max-w-2xl mx-auto mb-6`;
            
            matchedPairs = 0;
            totalPairs = selectedEmojis.length;
            moveCounter = 0;
            gameTimeLeft = 0;
            gameScore = 0;
            
            document.getElementById('moveCounter').textContent = moveCounter;
            document.getElementById('gameTimer').textContent = gameTimeLeft;
            document.getElementById('gameScore').textContent = gameScore;
            
            // Clear any existing interval
            if (gameInterval) clearInterval(gameInterval);
            
            // Start timer
            gameInterval = setInterval(() => {
                gameTimeLeft++;
                document.getElementById('gameTimer').textContent = gameTimeLeft;
            }, 1000);
            
            gameEmojis.forEach((emoji, index) => {
                const card = document.createElement('div');
                const cardSize = memoryGridSize <= 4 ? 'w-16 h-16' : 'w-12 h-12';
                card.className = `${cardSize} bg-gradient-to-br from-blue-200 to-purple-200 rounded-2xl flex items-center justify-center cursor-pointer hover:scale-105 transition-all shadow-lg card-back`;
                card.dataset.emoji = emoji;
                card.dataset.index = index;
                card.innerHTML = '<span class="text-2xl">‚ùì</span>';
                card.onclick = () => flipCard(card);
                cardsContainer.appendChild(card);
            });
        }

        function flipCard(card) {
            if (flippedCards.length >= 2 || card.classList.contains('flipped') || card.classList.contains('matched')) return;
            
            card.innerHTML = `<span class="text-2xl">${card.dataset.emoji}</span>`;
            card.classList.add('flipped');
            card.classList.remove('card-back');
            card.classList.add('bg-gradient-to-br', 'from-yellow-200', 'to-orange-200');
            flippedCards.push(card);
            
            if (flippedCards.length === 2) {
                moveCounter++;
                document.getElementById('moveCounter').textContent = moveCounter;
                setTimeout(checkMatch, 1000);
            }
        }

        function checkMatch() {
            const [card1, card2] = flippedCards;
            
            if (card1.dataset.emoji === card2.dataset.emoji) {
                // Match found!
                const baseScore = 100;
                const timeBonus = Math.max(0, 300 - gameTimeLeft);
                const moveBonus = Math.max(0, 50 - moveCounter);
                gameScore += baseScore + timeBonus + moveBonus;
                matchedPairs++;
                document.getElementById('gameScore').textContent = gameScore;
                
                card1.classList.add('matched');
                card2.classList.add('matched');
                card1.classList.remove('bg-gradient-to-br', 'from-yellow-200', 'to-orange-200');
                card2.classList.remove('bg-gradient-to-br', 'from-yellow-200', 'to-orange-200');
                card1.classList.add('bg-gradient-to-br', 'from-green-200', 'to-emerald-200');
                card2.classList.add('bg-gradient-to-br', 'from-green-200', 'to-emerald-200');
                card1.style.transform = 'scale(1.1)';
                card2.style.transform = 'scale(1.1)';
                
                setTimeout(() => {
                    card1.style.transform = 'scale(1)';
                    card2.style.transform = 'scale(1)';
                }, 300);
                
                // Check if game is complete
                if (matchedPairs === totalPairs) {
                    setTimeout(() => {
                        const completionBonus = 500;
                        gameScore += completionBonus;
                        document.getElementById('gameScore').textContent = gameScore;
                        alert(`üéâ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß!\n‡πÄ‡∏ß‡∏•‡∏≤: ${gameTimeLeft} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ\n‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á: ${moveCounter}\n‡πÇ‡∏ö‡∏ô‡∏±‡∏™: +${completionBonus} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô`);
                        
                        // Award coins based on difficulty and performance
                        let baseCoins = 2; // Base coins reduced
                        let difficultyBonus = 0;
                        let difficultyName = '';
                        
                        if (memoryGridSize === 2) {
                            difficultyBonus = 1;
                            difficultyName = '‡∏á‡πà‡∏≤‡∏¢ (2x2)';
                        } else if (memoryGridSize === 4) {
                            difficultyBonus = 3;
                            difficultyName = '‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á (4x4)';
                        } else if (memoryGridSize === 6) {
                            difficultyBonus = 6;
                            difficultyName = '‡∏¢‡∏≤‡∏Å (6x6)';
                        }
                        
                        const scoreBonus = Math.floor(gameScore / 500); // Reduced score bonus
                        const coinsEarned = baseCoins + difficultyBonus + scoreBonus;
                        
                        // Add challenge bonus for 8x8 grid
                        let challengeBonus = 0;
                        if (memoryGridSize === 8) {
                            challengeBonus = 10 + (memoryRound - 1) * 5;
                            coinsEarned += challengeBonus;
                            difficultyName = `‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢ 8x8 (‡∏£‡∏≠‡∏ö ${memoryRound})`;
                        }
                        
                        const details = `‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å: ${difficultyName}\n‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ${gameScore}\n‡πÄ‡∏ß‡∏•‡∏≤: ${gameTimeLeft} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ\n‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á: ${moveCounter}\n\n‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô: +${baseCoins}\n‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å: +${difficultyBonus}${challengeBonus > 0 ? `\n‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢: +${challengeBonus}` : ''}\n‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: +${scoreBonus}`;
                        
                        setTimeout(() => {
                            // Update quest progress
                            updateQuestProgress('brainGames', 1);
                            
                            awardCoinsAndStreak(coinsEarned, '‡πÄ‡∏Å‡∏°‡∏ù‡∏∂‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥', details);
                            
                            // Ask if player wants to continue with harder difficulty
                            setTimeout(() => {
                                const continueGame = confirm(`üéÆ ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡∏ï‡πà‡∏≠‡πÉ‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏¢‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏´‡∏°?\n\nüî• ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ñ‡∏±‡∏î‡πÑ‡∏õ: ${getNextDifficultyName(memoryGridSize)}\nüí∞ ‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô!`);
                                if (continueGame) {
                                    // Increase difficulty
                                    if (memoryGridSize === 2) {
                                        setMemoryDifficulty(4);
                                    } else if (memoryGridSize === 4) {
                                        setMemoryDifficulty(6);
                                    } else {
                                        // Max difficulty reached, create custom challenge
                                        createCustomMemoryChallenge();
                                    }
                                } else {
                                    stopGame();
                                }
                            }, 2000);
                        }, 1000);
                    }, 500);
                }
            } else {
                // No match
                setTimeout(() => {
                    card1.innerHTML = '<span class="text-2xl">‚ùì</span>';
                    card2.innerHTML = '<span class="text-2xl">‚ùì</span>';
                    card1.classList.remove('flipped', 'bg-gradient-to-br', 'from-yellow-200', 'to-orange-200');
                    card2.classList.remove('flipped', 'bg-gradient-to-br', 'from-yellow-200', 'to-orange-200');
                    card1.classList.add('card-back', 'bg-gradient-to-br', 'from-blue-200', 'to-purple-200');
                    card2.classList.add('card-back', 'bg-gradient-to-br', 'from-blue-200', 'to-purple-200');
                }, 200);
            }
            
            flippedCards = [];
        }

        // Simon Game Variables
        let simonLevel = 1;
        let simonScore = 0;
        let simonSequence = [];
        let playerInput = [];
        let showingSimonSequence = false;
        let simonTimeout;
        let simonColors = ['red', 'green', 'blue', 'yellow'];
        let simonButtons = ['simon-red', 'simon-green', 'simon-blue', 'simon-yellow'];
        
        // Game page navigation
        function showGamePage(gameType) {
            // Hide main menu and show game page
            document.querySelector('.max-w-4xl').style.display = 'none';
            document.querySelectorAll('.section').forEach(s => s.classList.add('hidden'));
            
            // Show selected game page
            document.getElementById(gameType + 'GamePage').classList.remove('hidden');
            
            // Reset game states
            if (gameType === 'memory') {
                resetMemoryGame();
            } else if (gameType === 'reaction') {
                resetReactionGame();
            } else if (gameType === 'word') {
                resetWordGame();
            } else if (gameType === 'simon') {
                resetSimonGame();
            }
        }
        
        function resetMemoryGame() {
            gameScore = 0;
            moveCounter = 0;
            gameTimeLeft = 0;
            matchedPairs = 0;
            flippedCards = [];
            document.getElementById('gameScore').textContent = gameScore;
            document.getElementById('moveCounter').textContent = moveCounter;
            document.getElementById('gameTimer').textContent = gameTimeLeft;
            document.getElementById('memoryCards').innerHTML = '';
            if (gameInterval) clearInterval(gameInterval);
        }
        
        function resetReactionGame() {
            reactionRound = 1;
            reactionTimes = [];
            waitingForGreen = false;
            maxReactionRounds = 5;
            isAdvancedMode = false;
            document.getElementById('reactionRound').textContent = reactionRound;
            document.getElementById('avgReactionTime').textContent = '-';
            document.getElementById('reactionMessage').textContent = '‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô';
            resetCircles();
            if (reactionTimeout) clearTimeout(reactionTimeout);
        }
        
        function resetWordGame() {
            wordLevel = 1;
            wordScore = 0;
            currentWordCount = 5;
            isExpertWordMode = false;
            wordTimeLimit = 5;
            document.getElementById('wordLevel').textContent = wordLevel;
            document.getElementById('wordScore').textContent = wordScore;
            document.getElementById('wordCount').textContent = currentWordCount;
            document.getElementById('wordMemoryPhase').classList.remove('hidden');
            document.getElementById('wordTestPhase').classList.add('hidden');
            document.getElementById('originalWords').innerHTML = '';
            document.getElementById('testWords').innerHTML = '';
        }
        
        function resetSimonGame() {
            simonLevel = 1;
            simonScore = 0;
            simonSequence = [];
            playerInput = [];
            showingSimonSequence = false;
            document.getElementById('simonLevel').textContent = simonLevel;
            document.getElementById('simonScore').textContent = simonScore;
            document.getElementById('simonMessage').textContent = '‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô';
            enableSimonButtons(false);
            if (simonTimeout) clearTimeout(simonTimeout);
        }
        
        // Simon Game Functions
        function startSimonGame() {
            simonLevel = 1;
            simonScore = 0;
            simonSequence = [];
            playerInput = [];
            showingSimonSequence = false;
            
            document.getElementById('simonLevel').textContent = simonLevel;
            document.getElementById('simonScore').textContent = simonScore;
            document.getElementById('simonMessage').textContent = '‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ï‡∏±‡∏ß...';
            
            // Add first color to sequence
            addToSimonSequence();
            
            // Start showing sequence after 1 second
            setTimeout(() => {
                showSimonSequence();
            }, 1000);
        }
        
        function addToSimonSequence() {
            const randomColor = Math.floor(Math.random() * 4);
            simonSequence.push(randomColor);
        }
        
        function showSimonSequence() {
            showingSimonSequence = true;
            playerInput = [];
            enableSimonButtons(false);
            document.getElementById('simonMessage').textContent = '‡∏à‡∏≥‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏™‡∏µ...';
            
            let index = 0;
            
            function flashNext() {
                if (index < simonSequence.length) {
                    const colorIndex = simonSequence[index];
                    flashSimonButton(colorIndex);
                    
                    setTimeout(() => {
                        index++;
                        if (index < simonSequence.length) {
                            setTimeout(flashNext, 200);
                        } else {
                            setTimeout(() => {
                                showingSimonSequence = false;
                                enableSimonButtons(true);
                                document.getElementById('simonMessage').textContent = '‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö!';
                            }, 500);
                        }
                    }, 600);
                }
            }
            
            setTimeout(flashNext, 500);
        }
        
        function flashSimonButton(colorIndex) {
            const button = document.getElementById(simonButtons[colorIndex]);
            const originalClass = button.className;
            
            // Light up the button
            button.className = button.className.replace(`bg-${simonColors[colorIndex]}-500`, `bg-${simonColors[colorIndex]}-300`);
            button.style.transform = 'scale(1.1)';
            button.style.boxShadow = `0 0 30px rgba(255, 255, 255, 0.8)`;
            
            // Return to normal after 500ms
            setTimeout(() => {
                button.className = originalClass;
                button.style.transform = '';
                button.style.boxShadow = '';
            }, 500);
        }
        
        function enableSimonButtons(enabled) {
            simonButtons.forEach(buttonId => {
                const button = document.getElementById(buttonId);
                button.disabled = !enabled;
            });
        }
        
        function simonButtonClick(colorIndex) {
            if (showingSimonSequence) return;
            
            // Flash the clicked button
            flashSimonButton(colorIndex);
            
            // Add to player input
            playerInput.push(colorIndex);
            
            // Check if the input is correct so far
            const currentIndex = playerInput.length - 1;
            if (playerInput[currentIndex] !== simonSequence[currentIndex]) {
                // Wrong! Game Over
                gameOver();
                return;
            }
            
            // Check if sequence is complete
            if (playerInput.length === simonSequence.length) {
                // Correct sequence completed!
                simonScore += simonLevel * 10;
                document.getElementById('simonScore').textContent = simonScore;
                
                if (simonLevel >= 20) {
                    // Player won!
                    winSimonGame();
                } else {
                    // Next level
                    simonLevel++;
                    document.getElementById('simonLevel').textContent = simonLevel;
                    document.getElementById('simonMessage').textContent = 'üéâ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ñ‡∏±‡∏î‡πÑ‡∏õ...';
                    
                    setTimeout(() => {
                        addToSimonSequence();
                        showSimonSequence();
                    }, 1500);
                }
            }
        }
        
        function gameOver() {
            enableSimonButtons(false);
            document.getElementById('simonMessage').textContent = `üî¥ Game Over! ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ${simonScore}`;
            
            // Calculate coins based on performance
            let coinsEarned = 2; // Base coins
            let performanceLevel = '';
            
            if (simonLevel >= 15) {
                coinsEarned = 12;
                performanceLevel = '‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏° (15+ ‡∏£‡∏∞‡∏î‡∏±‡∏ö)';
            } else if (simonLevel >= 10) {
                coinsEarned = 8;
                performanceLevel = '‡∏î‡∏µ‡∏°‡∏≤‡∏Å (10+ ‡∏£‡∏∞‡∏î‡∏±‡∏ö)';
            } else if (simonLevel >= 5) {
                coinsEarned = 5;
                performanceLevel = '‡∏î‡∏µ (5+ ‡∏£‡∏∞‡∏î‡∏±‡∏ö)';
            } else {
                coinsEarned = 2;
                performanceLevel = '‡∏ú‡πà‡∏≤‡∏ô';
            }
            
            const details = `‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î: ${simonLevel}/20\n‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°: ${simonScore}\n‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ú‡∏•‡∏á‡∏≤‡∏ô: ${performanceLevel}`;
            
            setTimeout(() => {
                // Update quest progress
                updateQuestProgress('brainGames', 1);
                
                awardCoinsAndStreak(coinsEarned, '‡πÄ‡∏Å‡∏° Simon', details);
                
                // Ask if player wants to play again
                setTimeout(() => {
                    const playAgain = confirm(`üéÆ ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏´‡∏°?\n\n‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏µ‡πâ: ${simonScore}\n‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î: ${simonLevel}`);
                    if (playAgain) {
                        startSimonGame();
                    } else {
                        document.getElementById('simonStartBtn').textContent = 'üéµ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°';
                        document.getElementById('simonMessage').textContent = '‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô';
                    }
                }, 2000);
            }, 2000);
        }
        
        function winSimonGame() {
            enableSimonButtons(false);
            document.getElementById('simonMessage').textContent = `üèÜ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÅ‡∏•‡πâ‡∏ß!`;
            
            // Bonus coins for completing all levels
            const baseCoins = 15;
            const perfectBonus = 10;
            const coinsEarned = baseCoins + perfectBonus;
            
            const details = `‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î: 20/20 (‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡πÅ‡∏ö‡∏ö!)\n‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°: ${simonScore}\n‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ú‡∏•‡∏á‡∏≤‡∏ô: ‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡πÅ‡∏ö‡∏ö\n\n‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô: +${baseCoins}\n‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡πÅ‡∏ö‡∏ö: +${perfectBonus}`;
            
            setTimeout(() => {
                awardCoinsAndStreak(coinsEarned, '‡πÄ‡∏Å‡∏° Simon', details);
                
                // Ask if player wants to play again
                setTimeout(() => {
                    const playAgain = confirm(`üéÆ ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏´‡∏°?\n\nüèÜ ‡∏Ñ‡∏∏‡∏ì‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÅ‡∏•‡πâ‡∏ß!\n‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ${simonScore}`);
                    if (playAgain) {
                        startSimonGame();
                    } else {
                        document.getElementById('simonStartBtn').textContent = 'üéµ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°';
                        document.getElementById('simonMessage').textContent = '‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô';
                    }
                }, 2000);
            }, 2000);
        }
        
        // Reaction Game Functions
        function startReactionGame() {
            reactionRound = 1;
            reactionTimes = [];
            waitingForGreen = false;
            document.getElementById('reactionRound').textContent = reactionRound;
            document.getElementById('avgReactionTime').textContent = '-';
            document.getElementById('reactionMessage').textContent = '‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ï‡∏±‡∏ß...';
            resetCircles();
            
            // Start first round after 2 seconds
            setTimeout(() => {
                nextReactionRound();
            }, 2000);
        }
        
        function resetCircles() {
            for (let i = 1; i <= 3; i++) {
                const circle = document.getElementById(`circle${i}`);
                circle.className = 'w-20 h-20 bg-gray-300 rounded-full mx-auto cursor-pointer transition-all transform hover:scale-110 shadow-lg';
            }
        }
        
        function nextReactionRound() {
            if (reactionRound > maxReactionRounds) {
                finishReactionGame();
                return;
            }
            
            resetCircles();
            const modeText = isAdvancedMode ? 'üî• ‡πÇ‡∏´‡∏°‡∏î‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢' : '';
            document.getElementById('reactionMessage').textContent = `${modeText} ‡∏£‡∏≠‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì...`;
            waitingForGreen = false;
            
            // Clear any existing timeout
            if (reactionTimeout) clearTimeout(reactionTimeout);
            
            // Adjust delay based on mode - advanced mode has shorter and more unpredictable delays
            let minDelay, maxDelay;
            if (isAdvancedMode) {
                minDelay = 1000; // 1 second minimum
                maxDelay = 3000; // 3 seconds maximum
            } else {
                minDelay = 2000; // 2 seconds minimum
                maxDelay = 5000; // 5 seconds maximum
            }
            
            const delay = Math.random() * (maxDelay - minDelay) + minDelay;
            
            reactionTimeout = setTimeout(() => {
                showGreenCircle();
            }, delay);
        }
        
        function showGreenCircle() {
            const circleNum = Math.floor(Math.random() * 3) + 1;
            const colors = ['bg-red-400', 'bg-blue-400', 'bg-yellow-400', 'bg-purple-400'];
            const isGreen = Math.random() < 0.6; // 60% chance for green
            
            const circle = document.getElementById(`circle${circleNum}`);
            
            if (isGreen) {
                circle.className = 'w-20 h-20 bg-green-400 rounded-full mx-auto cursor-pointer transition-all transform hover:scale-110 shadow-lg';
                document.getElementById('reactionMessage').textContent = '‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏•‡∏¢!';
                waitingForGreen = true;
                reactionStartTime = Date.now();
            } else {
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                circle.className = `w-20 h-20 ${randomColor} rounded-full mx-auto cursor-pointer transition-all transform hover:scale-110 shadow-lg`;
                document.getElementById('reactionMessage').textContent = '‡∏≠‡∏¢‡πà‡∏≤‡∏Ñ‡∏•‡∏¥‡∏Å!';
                waitingForGreen = false;
            }
            
            // Auto advance after 3 seconds
            setTimeout(() => {
                if (waitingForGreen) {
                    document.getElementById('reactionMessage').textContent = '‡∏ä‡πâ‡∏≤‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ!';
                    reactionTimes.push(3000); // Max time penalty
                }
                setTimeout(() => {
                    reactionRound++;
                    document.getElementById('reactionRound').textContent = reactionRound;
                    nextReactionRound();
                }, 1000);
            }, 3000);
        }
        
        function clickCircle(circleNum) {
            const circle = document.getElementById(`circle${circleNum}`);
            const isGreen = circle.classList.contains('bg-green-400');
            
            if (waitingForGreen && isGreen) {
                const reactionTime = Date.now() - reactionStartTime;
                reactionTimes.push(reactionTime);
                document.getElementById('reactionMessage').textContent = `‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°! ${reactionTime} ms`;
                waitingForGreen = false;
                
                if (reactionTimeout) clearTimeout(reactionTimeout);
                
                setTimeout(() => {
                    reactionRound++;
                    document.getElementById('reactionRound').textContent = reactionRound;
                    nextReactionRound();
                }, 1500);
            } else if (!waitingForGreen && !isGreen) {
                document.getElementById('reactionMessage').textContent = '‡∏ú‡∏¥‡∏î! ‡∏≠‡∏¢‡πà‡∏≤‡∏Ñ‡∏•‡∏¥‡∏Å‡∏™‡∏µ‡∏≠‡∏∑‡πà‡∏ô';
                reactionTimes.push(5000); // Penalty
                
                setTimeout(() => {
                    reactionRound++;
                    document.getElementById('reactionRound').textContent = reactionRound;
                    nextReactionRound();
                }, 1500);
            } else if (waitingForGreen && !isGreen) {
                document.getElementById('reactionMessage').textContent = '‡∏ú‡∏¥‡∏î! ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô';
                reactionTimes.push(5000); // Penalty
                waitingForGreen = false;
                
                setTimeout(() => {
                    reactionRound++;
                    document.getElementById('reactionRound').textContent = reactionRound;
                    nextReactionRound();
                }, 1500);
            } else if (!waitingForGreen && isGreen) {
                document.getElementById('reactionMessage').textContent = '‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ! ‡∏£‡∏≠‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏Å‡πà‡∏≠‡∏ô';
                reactionTimes.push(5000); // Penalty
            }
        }
        
        function finishReactionGame() {
            const avgTime = reactionTimes.reduce((a, b) => a + b, 0) / reactionTimes.length;
            document.getElementById('avgReactionTime').textContent = Math.round(avgTime);
            
            const modeText = isAdvancedMode ? 'üî• ‡πÇ‡∏´‡∏°‡∏î‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢' : '';
            document.getElementById('reactionMessage').textContent = `${modeText} ‡πÄ‡∏Å‡∏°‡∏à‡∏ö! ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢: ${Math.round(avgTime)} ms`;
            
            // Calculate coins based on performance
            let coinsEarned = 2; // Base coins reduced
            let performanceLevel = '';
            
            if (avgTime < 500) {
                coinsEarned = 8;
                performanceLevel = '‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏° (< 500ms)';
            } else if (avgTime < 800) {
                coinsEarned = 6;
                performanceLevel = '‡∏î‡∏µ‡∏°‡∏≤‡∏Å (< 800ms)';
            } else if (avgTime < 1200) {
                coinsEarned = 4;
                performanceLevel = '‡∏î‡∏µ (< 1200ms)';
            } else {
                coinsEarned = 2;
                performanceLevel = '‡∏ú‡πà‡∏≤‡∏ô';
            }
            
            // Add advanced mode bonus
            let advancedBonus = 0;
            if (isAdvancedMode) {
                advancedBonus = Math.floor(coinsEarned * 0.5); // 50% bonus for advanced mode
                coinsEarned += advancedBonus;
            }
            
            const details = `‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢: ${Math.round(avgTime)} ms\n‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ú‡∏•‡∏á‡∏≤‡∏ô: ${performanceLevel}\n‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏•‡πà‡∏ô: ${reactionRound - 1}/${maxReactionRounds}${isAdvancedMode ? `\n‡πÇ‡∏´‡∏°‡∏î‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢: +${advancedBonus} ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç` : ''}`;
            
            setTimeout(() => {
                // Update quest progress
                updateQuestProgress('brainGames', 1);
                
                awardCoinsAndStreak(coinsEarned, '‡πÄ‡∏Å‡∏°‡∏ù‡∏∂‡∏Å‡∏õ‡∏è‡∏¥‡∏Å‡∏¥‡∏£‡∏¥‡∏¢‡∏≤', details);
                
                // Ask if player wants to continue with more rounds
                setTimeout(() => {
                    const continueGame = confirm(`üéÆ ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡∏ï‡πà‡∏≠‡πÉ‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏¢‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏´‡∏°?\n\nüî• ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ñ‡∏±‡∏î‡πÑ‡∏õ: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏õ‡πá‡∏ô 10 ‡∏£‡∏≠‡∏ö + ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏™‡∏π‡∏á‡∏Ç‡∏∂‡πâ‡∏ô\nüí∞ ‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô!`);
                    if (continueGame) {
                        startAdvancedReactionGame();
                    } else {
                        stopGame();
                    }
                }, 2000);
            }, 2000);
        }
        
        // Word Memory Game Functions
        function startWordGame() {
            wordLevel = 1;
            wordScore = 0;
            currentWordCount = 5;
            document.getElementById('wordLevel').textContent = wordLevel;
            document.getElementById('wordScore').textContent = wordScore;
            document.getElementById('wordCount').textContent = currentWordCount;
            startWordRound();
        }
        
        function startWordRound() {
            // Reset phases
            document.getElementById('wordMemoryPhase').classList.remove('hidden');
            document.getElementById('wordTestPhase').classList.add('hidden');
            
            // Select random words
            originalWordsList = [];
            const shuffledWords = [...wordBank].sort(() => Math.random() - 0.5);
            originalWordsList = shuffledWords.slice(0, currentWordCount);
            
            // Display original words
            const originalWordsContainer = document.getElementById('originalWords');
            originalWordsContainer.innerHTML = '';
            
            // Use fixed grid classes
            let gridClass = 'grid-cols-2';
            if (currentWordCount > 6) gridClass = 'grid-cols-3';
            if (currentWordCount > 9) gridClass = 'grid-cols-4';
            originalWordsContainer.className = `grid ${gridClass} gap-4 max-w-md mx-auto mb-6`;
            
            originalWordsList.forEach(word => {
                const wordElement = document.createElement('div');
                wordElement.className = 'bg-blue-100 px-4 py-3 rounded-xl font-bold text-blue-800 text-center shadow-lg';
                wordElement.textContent = word;
                originalWordsContainer.appendChild(wordElement);
            });
            
            // Start countdown with dynamic time limit
            let timeLeft = isExpertWordMode ? wordTimeLimit : 5;
            document.getElementById('wordTimer').textContent = timeLeft;
            
            const countdown = setInterval(() => {
                timeLeft--;
                document.getElementById('wordTimer').textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(countdown);
                    showWordTest();
                }
            }, 1000);
        }
        
        function showWordTest() {
            document.getElementById('wordMemoryPhase').classList.add('hidden');
            document.getElementById('wordTestPhase').classList.remove('hidden');
            
            // Create test words (original + distractors)
            const distractorCount = Math.min(2, Math.floor(currentWordCount / 3) + 1);
            const availableWords = wordBank.filter(word => !originalWordsList.includes(word));
            const distractors = availableWords.sort(() => Math.random() - 0.5).slice(0, distractorCount);
            currentDistractors = [...distractors]; // Store current distractors
            selectedDistractors = []; // Reset selected distractors
            
            const testWords = [...originalWordsList, ...distractors].sort(() => Math.random() - 0.5);
            
            // Display test words
            const testWordsContainer = document.getElementById('testWords');
            testWordsContainer.innerHTML = '';
            
            // Use fixed grid classes
            let gridClass = 'grid-cols-2';
            if (testWords.length > 6) gridClass = 'grid-cols-3';
            if (testWords.length > 9) gridClass = 'grid-cols-4';
            testWordsContainer.className = `grid ${gridClass} gap-4 max-w-md mx-auto mb-6`;
            
            testWords.forEach(word => {
                const wordElement = document.createElement('div');
                wordElement.className = 'bg-gray-100 hover:bg-gray-200 px-4 py-3 rounded-xl font-bold text-gray-800 text-center shadow-lg cursor-pointer transition-all transform hover:scale-105';
                wordElement.textContent = word;
                wordElement.onclick = () => selectWord(word, wordElement, currentDistractors);
                testWordsContainer.appendChild(wordElement);
            });
        }
        
        let selectedDistractors = [];
        let currentDistractors = [];
        
        function selectWord(word, element, distractors) {
            const isDistractor = distractors.includes(word);
            
            if (isDistractor) {
                // Correct! This is a new word
                wordScore += 50;
                element.className = 'bg-green-200 px-4 py-3 rounded-xl font-bold text-green-800 text-center shadow-lg';
                element.style.pointerEvents = 'none';
                selectedDistractors.push(word);
                
                // Check if all distractors found
                if (selectedDistractors.length === distractors.length) {
                    setTimeout(() => {
                        wordLevel++;
                        currentWordCount = Math.min(15, 5 + (wordLevel - 1) * 2);
                        document.getElementById('wordLevel').textContent = wordLevel;
                        document.getElementById('wordCount').textContent = currentWordCount;
                        selectedDistractors = [];
                        
                        const maxLevel = isExpertWordMode ? 3 : 5;
                        if (wordLevel <= maxLevel) {
                            const modeText = isExpertWordMode ? ' (‡πÇ‡∏´‡∏°‡∏î‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç)' : '';
                            alert(`üéâ ‡∏ú‡πà‡∏≤‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö ${wordLevel - 1}${modeText}! ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡πÄ‡∏õ‡πá‡∏ô ${currentWordCount} ‡∏Ñ‡∏≥`);
                            startWordRound();
                        } else {
                            alert(`üèÜ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÅ‡∏•‡πâ‡∏ß! ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°: ${wordScore}`);
                            let baseCoins = 3; // Base coins reduced
                            const levelBonus = (wordLevel - 1) * 1; // 1 coin per level
                            const scoreBonus = Math.floor(wordScore / 100); // Reduced score bonus
                            let expertBonus = 0;
                            
                            if (isExpertWordMode) {
                                expertBonus = baseCoins + levelBonus + scoreBonus; // Double the reward
                                baseCoins *= 2;
                            }
                            
                            const coinsEarned = baseCoins + levelBonus + scoreBonus + expertBonus;
                            
                            const maxLevel = isExpertWordMode ? 3 : 5;
                            const modeText = isExpertWordMode ? ' (‡πÇ‡∏´‡∏°‡∏î‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç)' : '';
                            const details = `‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î: ${wordLevel - 1}/${maxLevel}${modeText}\n‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°: ${wordScore}\n‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î: ${currentWordCount}\n\n‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô: +${baseCoins}\n‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏£‡∏∞‡∏î‡∏±‡∏ö: +${levelBonus}\n‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: +${scoreBonus}${expertBonus > 0 ? `\n‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç: +${expertBonus}` : ''}`;
                            
                            setTimeout(() => {
                                // Update quest progress
                                updateQuestProgress('brainGames', 1);
                                
                                awardCoinsAndStreak(coinsEarned, '‡πÄ‡∏Å‡∏°‡∏à‡∏≥‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå', details);
                                
                                // Ask if player wants to continue with expert mode
                                setTimeout(() => {
                                    const continueGame = confirm(`üéÆ ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡∏ï‡πà‡∏≠‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡πÑ‡∏´‡∏°?\n\nüî• ‡πÇ‡∏´‡∏°‡∏î‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç: 20 ‡∏Ñ‡∏≥ + ‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏≥‡∏Å‡∏±‡∏î\nüí∞ ‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô 2 ‡πÄ‡∏ó‡πà‡∏≤!`);
                                    if (continueGame) {
                                        startExpertWordGame();
                                    } else {
                                        stopGame();
                                    }
                                }, 2000);
                            }, 1000);
                        }
                    }, 1000);
                }
            } else {
                // Wrong! This was an original word
                wordScore = Math.max(0, wordScore - 25);
                element.className = 'bg-red-200 px-4 py-3 rounded-xl font-bold text-red-800 text-center shadow-lg';
                element.style.pointerEvents = 'none';
            }
            
            document.getElementById('wordScore').textContent = wordScore;
        }



        // Brain Games Navigation
        function startBrainGame(gameType) {
            showGamePage(gameType);
        }
        
        function stopGame() {
            clearInterval(gameInterval);
            clearTimeout(reactionTimeout);
            clearTimeout(simonTimeout);
        }

        // Reading functionality
        function startReading() {
            const time = getReadingTime();
            const btn = document.getElementById('readingBtn');
            const timer = document.getElementById('readingTimer');
            
            let seconds = time * 60;
            btn.textContent = 'üìñ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡πà‡∏≤‡∏ô... (‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏¢‡∏∏‡∏î)';
            btn.onclick = () => stopReading(time);
            
            readingInterval = setInterval(() => {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                timer.textContent = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
                
                if (seconds <= 0) {
                    clearInterval(readingInterval);
                    completeReading(time);
                }
                seconds--;
            }, 1000);
        }

        function stopReading(originalTime) {
            clearInterval(readingInterval);
            const btn = document.getElementById('readingBtn');
            const timer = document.getElementById('readingTimer');
            
            btn.textContent = 'üìñ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏≠‡πà‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠';
            btn.onclick = startReading;
            timer.textContent = '00:00';
            
            // Calculate partial time read
            const timeRead = originalTime - Math.floor(parseInt(timer.textContent.split(':')[0]) + parseInt(timer.textContent.split(':')[1]) / 60);
            if (timeRead > 0) {
                gameState.readingTime += timeRead;
                updateReadingProgress();
                saveGameState();
                
                const coinsEarned = Math.max(1, Math.floor(timeRead / 2)); // 1 coin per 2 minutes
                const details = `‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡πà‡∏≤‡∏ô: ${timeRead} ‡∏ô‡∏≤‡∏ó‡∏µ\n‡∏≠‡∏±‡∏ï‡∏£‡∏≤: 1 ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç/2 ‡∏ô‡∏≤‡∏ó‡∏µ`;
                awardCoinsAndStreak(coinsEarned, '‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠ (‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô)', details);
            }
        }

        function completeReading(time) {
            const btn = document.getElementById('readingBtn');
            const timer = document.getElementById('readingTimer');
            
            btn.textContent = 'üìñ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏≠‡πà‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠';
            btn.onclick = startReading;
            timer.textContent = '00:00';
            
            // Add to daily reading time
            gameState.readingTime += time;
            updateReadingProgress();
            
            // Update quest progress
            updateQuestProgress('reading', time);
            
            saveGameState();
            
            // Award coins based on time read
            const coinsEarned = Math.max(1, Math.floor(time / 2)); // 1 coin per 2 minutes
            const details = `‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡πà‡∏≤‡∏ô: ${time} ‡∏ô‡∏≤‡∏ó‡∏µ\n‡∏≠‡∏±‡∏ï‡∏£‡∏≤: 1 ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç/2 ‡∏ô‡∏≤‡∏ó‡∏µ\nüìö ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡∏£‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡πâ‡∏ß!`;
            awardCoinsAndStreak(coinsEarned, '‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠', details);
        }

        function updateReadingProgress() {
            const dailyGoal = 30; // 30 minutes daily goal
            const progress = Math.min((gameState.readingTime / dailyGoal) * 100, 100);
            document.getElementById('readingProgress').style.width = progress + '%';
            document.getElementById('dailyReadingTime').textContent = gameState.readingTime;
        }

        // Pet functionality
        function playWithPet() {
            if (gameState.pet.health > 0) {
                gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 15);
                updateUI();
                saveGameState();
                alert('üéÆ ‡πÄ‡∏•‡πà‡∏ô‡∏Å‡∏±‡∏ö ' + gameState.pet.name + ' ‡∏™‡∏ô‡∏∏‡∏Å‡∏°‡∏≤‡∏Å! ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç +15 üò∏');
            } else {
                alert('üò¢ ' + gameState.pet.name + ' ‡πÑ‡∏°‡πà‡∏™‡∏ö‡∏≤‡∏¢... ‡∏ï‡πâ‡∏≠‡∏á‡∏î‡∏π‡πÅ‡∏•‡πÉ‡∏´‡πâ‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô');
            }
        }

        function petPet() {
            if (gameState.pet.health > 0) {
                gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 10);
                updateUI();
                saveGameState();
                alert('ü§ó ‡∏•‡∏π‡∏ö‡∏´‡∏±‡∏ß ' + gameState.pet.name + ' ‡πÅ‡∏•‡πâ‡∏ß! ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç +10 üòä');
            } else {
                alert('üò¢ ' + gameState.pet.name + ' ‡πÑ‡∏°‡πà‡∏™‡∏ö‡∏≤‡∏¢... ‡∏ï‡πâ‡∏≠‡∏á‡∏î‡∏π‡πÅ‡∏•‡πÉ‡∏´‡πâ‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô');
            }
        }

        function exerciseWithPet() {
            if (gameState.pet.health > 0 && gameState.pet.food > 20 && gameState.pet.water > 20) {
                gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 10);
                gameState.pet.health = Math.min(100, gameState.pet.health + 5);
                gameState.pet.food = Math.max(0, gameState.pet.food - 10);
                gameState.pet.water = Math.max(0, gameState.pet.water - 10);
                updateUI();
                saveGameState();
                alert('üèÉ‚Äç‚ôÄÔ∏è ‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡∏Å‡∏±‡∏ö ' + gameState.pet.name + ' ‡πÅ‡∏•‡πâ‡∏ß! ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û +5, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç +10 üí™');
            } else if (gameState.pet.health <= 0) {
                alert('üò¢ ' + gameState.pet.name + ' ‡πÑ‡∏°‡πà‡∏™‡∏ö‡∏≤‡∏¢... ‡∏ï‡πâ‡∏≠‡∏á‡∏î‡∏π‡πÅ‡∏•‡πÉ‡∏´‡πâ‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô');
            } else {
                alert('üò¥ ' + gameState.pet.name + ' ‡∏´‡∏¥‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏´‡∏≤‡∏¢‡∏ô‡πâ‡∏≥ ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢‡πÑ‡∏î‡πâ');
            }
        }

        function buyItem(item) {
            const costs = { 
                basic_food: 5, premium_food: 15, bone_treat: 10,
                basic_water: 5, magic_water: 10, fruit_juice: 20,
                small_ball: 10, super_toy: 35, smart_toy: 25,
                soft_bed: 30, castle: 75, flower_garden: 40,
                cute_bow: 15, fashion: 50, princess_crown: 60
            };
            const cost = costs[item];
            
            if (gameState.coins >= cost) {
                gameState.coins -= cost;
                
                // Update quest progress for pet care
                updateQuestProgress('petCare', 1);
                
                switch(item) {
                    // Food items
                    case 'basic_food':
                        gameState.pet.food = Math.min(100, gameState.pet.food + 15);
                        alert('ü•© ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤‡∏≠‡∏£‡πà‡∏≠‡∏¢! ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏¥‡πà‡∏° +15');
                        break;
                    case 'premium_food':
                        gameState.pet.food = Math.min(100, gameState.pet.food + 25);
                        alert('üçñ ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏≠‡∏£‡πà‡∏≠‡∏¢‡∏°‡∏≤‡∏Å! ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏¥‡πà‡∏° +25');
                        break;
                    case 'bone_treat':
                        gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 20);
                        alert('ü¶¥ ‡∏Ç‡∏ô‡∏°‡∏Å‡∏£‡∏∞‡∏î‡∏π‡∏Å‡∏≠‡∏£‡πà‡∏≠‡∏¢! ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç +20');
                        break;
                    
                    // Drink items
                    case 'basic_water':
                        gameState.pet.water = Math.min(100, gameState.pet.water + 15);
                        alert('üö∞ ‡∏ô‡πâ‡∏≥‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤‡∏™‡∏î‡∏ä‡∏∑‡πà‡∏ô! ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏î‡∏ä‡∏∑‡πà‡∏ô +15');
                        break;
                    case 'magic_water':
                        gameState.pet.water = Math.min(100, gameState.pet.water + 25);
                        alert('üíß ‡∏ô‡πâ‡∏≥‡∏û‡∏∏‡∏ß‡∏¥‡πÄ‡∏®‡∏©‡∏™‡∏î‡∏ä‡∏∑‡πà‡∏ô‡∏°‡∏≤‡∏Å! ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏î‡∏ä‡∏∑‡πà‡∏ô +25');
                        break;
                    case 'fruit_juice':
                        gameState.pet.water = Math.min(100, gameState.pet.water + 15);
                        gameState.pet.health = Math.min(100, gameState.pet.health + 10);
                        gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 15);
                        alert('ü•§ ‡∏ô‡πâ‡∏≥‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏≠‡∏£‡πà‡∏≠‡∏¢‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå! ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û +10, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç +15');
                        break;
                    
                    // Toy items
                    case 'small_ball':
                        gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 15);
                        alert('‚öΩ ‡∏•‡∏π‡∏Å‡∏ö‡∏≠‡∏•‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å! ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç +15');
                        break;
                    case 'super_toy':
                        gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 40);
                        alert('üéæ ‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏™‡∏∏‡∏î‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏™‡∏ô‡∏∏‡∏Å‡∏°‡∏≤‡∏Å! ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç +40');
                        break;
                    case 'smart_toy':
                        gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 25);
                        gameState.pet.health = Math.min(100, gameState.pet.health + 5);
                        alert('ü™Ä ‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏™‡∏°‡∏≠‡∏á! ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç +25, ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û +5');
                        break;
                    
                    // Home items
                    case 'soft_bed':
                        gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 20);
                        gameState.pet.health = Math.min(100, gameState.pet.health + 10);
                        alert('üõèÔ∏è ‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡∏ô‡∏∏‡πà‡∏°‡∏ô‡∏¥‡πà‡∏°‡∏™‡∏ö‡∏≤‡∏¢‡∏°‡∏≤‡∏Å! ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç +20, ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û +10');
                        break;
                    case 'castle':
                        gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 60);
                        alert('üè∞ ‡∏õ‡∏£‡∏≤‡∏™‡∏≤‡∏ó‡∏´‡∏£‡∏π‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°‡∏°‡∏≤‡∏Å! ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç +60');
                        break;
                    case 'flower_garden':
                        gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 35);
                        gameState.pet.health = Math.min(100, gameState.pet.health + 15);
                        alert('üå∏ ‡∏™‡∏ß‡∏ô‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏™‡∏î‡∏ä‡∏∑‡πà‡∏ô! ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç +35, ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û +15');
                        break;
                    
                    // Fashion items
                    case 'cute_bow':
                        gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 15);
                        alert('üéÄ ‡πÇ‡∏ö‡∏ß‡πå‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏°‡∏≤‡∏Å! ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç +15');
                        break;
                    case 'fashion':
                        gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 30);
                        alert('üëó ‡∏ä‡∏∏‡∏î‡πÅ‡∏ü‡∏ä‡∏±‡πà‡∏ô‡∏™‡∏ß‡∏¢‡∏°‡∏≤‡∏Å! ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç +30');
                        break;
                    case 'princess_crown':
                        gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 50);
                        alert('üëë ‡∏°‡∏á‡∏Å‡∏∏‡∏é‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ç‡∏¥‡∏á‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°‡∏°‡∏≤‡∏Å! ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç +50');
                        break;
                }
                
                updateUI();
                saveGameState();
            } else {
                alert('üíî ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡πÑ‡∏°‡πà‡∏û‡∏≠! ‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° (‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ' + cost + ' ü™ô)');
            }
        }

        // Drag and Drop functionality
        function drag(event) {
            event.dataTransfer.setData("text", event.target.dataset.item);
        }

        function allowDrop(event) {
            event.preventDefault();
        }

        function drop(event) {
            event.preventDefault();
            const item = event.dataTransfer.getData("text");
            
            switch(item) {
                case 'food':
                    gameState.pet.food = Math.min(100, gameState.pet.food + 20);
                    alert('üçñ ‡πÉ‡∏´‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß! ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏¥‡πà‡∏° +20');
                    break;
                case 'water':
                    gameState.pet.water = Math.min(100, gameState.pet.water + 20);
                    alert('üíß ‡πÉ‡∏´‡πâ‡∏ô‡πâ‡∏≥‡πÅ‡∏•‡πâ‡∏ß! ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏î‡∏ä‡∏∑‡πà‡∏ô +20');
                    break;
                case 'toy':
                    gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 25);
                    alert('üéæ ‡πÄ‡∏•‡πà‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡πÅ‡∏•‡πâ‡∏ß! ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç +25');
                    break;
                case 'home':
                    gameState.pet.happiness = Math.min(100, gameState.pet.happiness + 30);
                    alert('üè† ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏ö‡πâ‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß! ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç +30');
                    break;
            }
            
            updateUI();
            saveGameState();
        }

        // Pet health decay system
        function petHealthDecay() {
            if (gameState.pet.food < 20 || gameState.pet.water < 20) {
                gameState.pet.health = Math.max(0, gameState.pet.health - 3);
            }
            
            gameState.pet.food = Math.max(0, gameState.pet.food - 1);
            gameState.pet.water = Math.max(0, gameState.pet.water - 2);
            gameState.pet.happiness = Math.max(0, gameState.pet.happiness - 1);
            
            updateUI();
            saveGameState();
        }

        // Initialize app
        // Wait for Firebase to be available, then initialize
        function initApp() {
            if (window.firebaseDB && window.firebaseAuth && window.firebaseUtils) {
                initializeFirebase();
            } else {
                // Retry after a short delay
                setTimeout(initApp, 100);
            }
        }
        
        // Start initialization
        initApp();
        
        // Set up drag and drop for pet area
        const petArea = document.getElementById('petEmojiLarge');
        if (petArea) {
            petArea.parentElement.ondrop = drop;
            petArea.parentElement.ondragover = allowDrop;
        }
        
        // Pet health decay every 45 seconds
        setInterval(petHealthDecay, 45000);
        
        // Update quest timer every second
        setInterval(updateQuestTimer, 1000);
        
        // Exit game function
        function exitGame() {
            // Stop all game timers and intervals
            stopGame();
            
            // Show attention section (brain games menu)
            showSection('attention');
        }
        
        // Authentication Functions
        function showAuthPrompt() {
            // Show login button in connection status
            const statusElement = document.getElementById('connectionStatus');
            if (statusElement) {
                statusElement.className = 'bg-gradient-to-r from-blue-100 to-purple-100 px-3 py-2 rounded-full border border-blue-200 cursor-pointer';
                statusElement.innerHTML = '<div class="text-center"><div class="text-xs font-bold text-blue-600">üîê ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</div></div>';
                statusElement.onclick = showLoginModal;
            }
            
            // Hide user profile
            const userProfile = document.getElementById('userProfile');
            if (userProfile) {
                userProfile.classList.add('hidden');
            }
        }
        
        function hideAuthPrompt() {
            // Remove click handler from connection status
            const statusElement = document.getElementById('connectionStatus');
            if (statusElement) {
                statusElement.onclick = null;
            }
        }
        
        function updateUserProfile(user) {
            const userProfile = document.getElementById('userProfile');
            const userDisplayName = document.getElementById('userDisplayName');
            
            if (userProfile && userDisplayName) {
                const displayName = user.displayName || user.email?.split('@')[0] || '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ';
                userDisplayName.textContent = displayName;
                userProfile.classList.remove('hidden');
            }
        }
        
        // Modal Functions
        function showLoginModal() {
            closeAuthModals();
            document.getElementById('loginModal').classList.remove('hidden');
            document.getElementById('loginEmail').focus();
        }
        
        function showRegisterModal() {
            closeAuthModals();
            document.getElementById('registerModal').classList.remove('hidden');
            document.getElementById('registerName').focus();
        }
        
        function showForgotPassword() {
            closeAuthModals();
            document.getElementById('forgotPasswordModal').classList.remove('hidden');
            document.getElementById('forgotEmail').focus();
        }
        
        function showUserMenu() {
            if (currentUser) {
                const userMenuName = document.getElementById('userMenuName');
                const userMenuEmail = document.getElementById('userMenuEmail');
                
                if (userMenuName && userMenuEmail) {
                    userMenuName.textContent = currentUser.displayName || '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ';
                    userMenuEmail.textContent = currentUser.email || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏≠‡∏µ‡πÄ‡∏°‡∏•';
                }
                
                document.getElementById('userMenuModal').classList.remove('hidden');
            }
        }
        
        function closeAuthModals() {
            document.getElementById('loginModal').classList.add('hidden');
            document.getElementById('registerModal').classList.add('hidden');
            document.getElementById('forgotPasswordModal').classList.add('hidden');
            
            // Clear error messages
            hideError('loginError');
            hideError('registerError');
            hideError('forgotError');
            hideError('registerSuccess');
            hideError('forgotSuccess');
        }
        
        function closeUserMenu() {
            document.getElementById('userMenuModal').classList.add('hidden');
        }
        
        function showError(elementId, message) {
            const element = document.getElementById(elementId);
            if (element) {
                element.textContent = message;
                element.classList.remove('hidden');
            }
        }
        
        function hideError(elementId) {
            const element = document.getElementById(elementId);
            if (element) {
                element.classList.add('hidden');
            }
        }
        
        // Authentication Handlers
        async function handleLogin(event) {
            event.preventDefault();
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                showError('loginError', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏•‡∏∞‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô');
                return;
            }
            
            try {
                const { signInWithEmailAndPassword } = window.firebaseUtils;
                const userCredential = await signInWithEmailAndPassword(window.firebaseAuth, email, password);
                
                console.log('‚úÖ Login successful:', userCredential.user.email);
                closeAuthModals();
                
                // Show success notification
                showAuthNotification('‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤ üéâ', 'success');
                
            } catch (error) {
                console.error('Login error:', error);
                let errorMessage = '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö';
                
                switch (error.code) {
                    case 'auth/user-not-found':
                        errorMessage = '‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ô‡∏µ‡πâ';
                        break;
                    case 'auth/wrong-password':
                        errorMessage = '‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á';
                        break;
                    case 'auth/invalid-email':
                        errorMessage = '‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á';
                        break;
                    case 'auth/too-many-requests':
                        errorMessage = '‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà';
                        break;
                }
                
                showError('loginError', errorMessage);
            }
        }
        
        async function handleRegister(event) {
            event.preventDefault();
            
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;
            
            // Validation
            if (!name || !email || !password || !confirmPassword) {
                showError('registerError', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');
                return;
            }
            
            if (password !== confirmPassword) {
                showError('registerError', '‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô');
                return;
            }
            
            if (password.length < 6) {
                showError('registerError', '‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 6 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£');
                return;
            }
            
            try {
                const { createUserWithEmailAndPassword, updateProfile } = window.firebaseUtils;
                
                // Create user account
                const userCredential = await createUserWithEmailAndPassword(window.firebaseAuth, email, password);
                
                // Update display name
                await updateProfile(userCredential.user, {
                    displayName: name
                });
                
                console.log('‚úÖ Registration successful:', userCredential.user.email);
                
                // Show success message
                document.getElementById('registerSuccess').textContent = '‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö...';
                document.getElementById('registerSuccess').classList.remove('hidden');
                
                // Close modal after delay
                setTimeout(() => {
                    closeAuthModals();
                    showAuthNotification('‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà Brain Booster üéâ', 'success');
                }, 2000);
                
            } catch (error) {
                console.error('Registration error:', error);
                let errorMessage = '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å';
                
                switch (error.code) {
                    case 'auth/email-already-in-use':
                        errorMessage = '‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß';
                        break;
                    case 'auth/invalid-email':
                        errorMessage = '‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á';
                        break;
                    case 'auth/weak-password':
                        errorMessage = '‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠';
                        break;
                }
                
                showError('registerError', errorMessage);
            }
        }
        
        async function handleForgotPassword(event) {
            event.preventDefault();
            
            const email = document.getElementById('forgotEmail').value;
            
            if (!email) {
                showError('forgotError', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•');
                return;
            }
            
            try {
                const { sendPasswordResetEmail } = window.firebaseUtils;
                await sendPasswordResetEmail(window.firebaseAuth, email);
                
                document.getElementById('forgotSuccess').textContent = '‡∏™‡πà‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡πâ‡∏ß';
                document.getElementById('forgotSuccess').classList.remove('hidden');
                hideError('forgotError');
                
            } catch (error) {
                console.error('Password reset error:', error);
                let errorMessage = '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•';
                
                switch (error.code) {
                    case 'auth/user-not-found':
                        errorMessage = '‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ô‡∏µ‡πâ';
                        break;
                    case 'auth/invalid-email':
                        errorMessage = '‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á';
                        break;
                }
                
                showError('forgotError', errorMessage);
            }
        }
        
        async function confirmLogout() {
            const confirmed = confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?\n\n‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥');
            if (confirmed) {
                try {
                    const { signOut } = window.firebaseUtils;
                    await signOut(window.firebaseAuth);
                    
                    closeUserMenu();
                    showAuthNotification('‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'info');
                    
                } catch (error) {
                    console.error('Logout error:', error);
                    alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö');
                }
            }
        }
        
        function showAuthNotification(message, type = 'info') {
            const notification = document.createElement('div');
            let bgColor = 'from-blue-400 to-purple-400';
            
            if (type === 'success') {
                bgColor = 'from-green-400 to-emerald-400';
            } else if (type === 'error') {
                bgColor = 'from-red-400 to-pink-400';
            }
            
            notification.className = `fixed top-20 left-1/2 transform -translate-x-1/2 z-50 bg-gradient-to-r ${bgColor} text-white px-6 py-4 rounded-2xl shadow-2xl transition-all duration-500 opacity-0 translate-y-4`;
            notification.innerHTML = `
                <div class="flex items-center space-x-3">
                    <div class="text-2xl">${type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : '‚ÑπÔ∏è'}</div>
                    <div class="font-bold">${message}</div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.classList.remove('opacity-0', 'translate-y-4');
            }, 100);
            
            // Animate out and remove
            setTimeout(() => {
                notification.classList.add('opacity-0', 'translate-y-4');
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 500);
            }, 4000);
        }
        
        function exportUserData() {
            if (!isAuthenticated) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•');
                return;
            }
            
            const userData = {
                user: {
                    email: currentUser?.email,
                    displayName: currentUser?.displayName,
                    uid: currentUserId
                },
                gameData: gameState,
                exportDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(userData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `brain-booster-data-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
            
            closeUserMenu();
            showAuthNotification('‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß üìä', 'success');
        }
        
        function showChangePasswordModal() {
            alert('‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏à‡∏∞‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡πÄ‡∏£‡πá‡∏ß‡πÜ ‡∏ô‡∏µ‡πâ\n\n‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ "‡∏•‡∏∑‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô" ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ');
            closeUserMenu();
        }
        
        // Set up form event listeners
        document.addEventListener('DOMContentLoaded', function() {
            const loginForm = document.getElementById('loginForm');
            const registerForm = document.getElementById('registerForm');
            const forgotPasswordForm = document.getElementById('forgotPasswordForm');
            
            if (loginForm) {
                loginForm.addEventListener('submit', handleLogin);
            }
            
            if (registerForm) {
                registerForm.addEventListener('submit', handleRegister);
            }
            
            if (forgotPasswordForm) {
                forgotPasswordForm.addEventListener('submit', handleForgotPassword);
            }
        });

        // Show main menu by default
        showMainMenu();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9770f8940715a1ae',t:'MTc1NjUyMjEyNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
